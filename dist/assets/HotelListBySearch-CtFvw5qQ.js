import{r as D,j as r,i as Fe,M as fe,u as xe,b as me,d as Re,T as Ie,x as Pe,y as ee,z as De,c as Ae,w as Be,A as Ee,t as Oe,H as ze,o as _e,S as ue,D as Ce,G as Ue,F as $e,l as Ve}from"./index-DAOtpb3C.js";import{I as Ze}from"./index.es-DE6WVxQk.js";import{m as Ke,M as He}from"./index.modern-rJcLIfFR.js";import{F as Ye}from"./FilterPill-BYVzUAqg.js";var We={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function Xe(n){if(typeof n=="number")return{value:n,unit:"px"};var c,a=(n.match(/^[0-9.]*/)||"").toString();a.includes(".")?c=parseFloat(a):c=parseInt(a,10);var e=(n.match(/[^0-9]*$/)||"").toString();return We[e]?{value:c,unit:e}:(console.warn("React Spinners: ".concat(n," is not a valid css value. Defaulting to ").concat(c,"px.")),{value:c,unit:"px"})}function Me(n){var c=Xe(n);return"".concat(c.value).concat(c.unit)}var qe=function(n,c,a){var e="react-spinners-".concat(n,"-").concat(a);if(typeof window>"u"||!window.document)return e;var t=document.createElement("style");document.head.appendChild(t);var l=t.sheet,d=`
    @keyframes `.concat(e,` {
      `).concat(c,`
    }
  `);return l&&l.insertRule(d,0),e},ge=function(){return ge=Object.assign||function(n){for(var c,a=1,e=arguments.length;a<e;a++){c=arguments[a];for(var t in c)Object.prototype.hasOwnProperty.call(c,t)&&(n[t]=c[t])}return n},ge.apply(this,arguments)},Ge=function(n,c){var a={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&c.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)c.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(a[e[t]]=n[e[t]]);return a},Je=qe("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function Qe(n){var c=n.loading,a=c===void 0?!0:c,e=n.color,t=e===void 0?"#000000":e,l=n.speedMultiplier,d=l===void 0?1:l,x=n.cssOverride,s=x===void 0?{}:x,g=n.size,f=g===void 0?35:g,u=Ge(n,["loading","color","speedMultiplier","cssOverride","size"]),p=ge({background:"transparent !important",width:Me(f),height:Me(f),borderRadius:"100%",border:"2px solid",borderTopColor:t,borderBottomColor:"transparent",borderLeftColor:t,borderRightColor:t,display:"inline-block",animation:"".concat(Je," ").concat(.75/d,"s 0s infinite linear"),animationFillMode:"both"},s);return a?D.createElement("span",ge({style:p},u)):null}const et=()=>r.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M17.7775 3.28296H19.25C20.358 3.28296 21.25 4.17496 21.25 5.28296V19.783C21.25 20.891 20.358 21.783 19.25 21.783H4.75C3.642 21.783 2.75 20.891 2.75 19.783V5.28296C2.75 4.17496 3.642 3.28296 4.75 3.28296H11.76",stroke:"#235DFF",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M14.769 2.21704C13.5021 2.21704 12.287 2.72033 11.3912 3.61619C10.4953 4.51205 9.992 5.7271 9.992 6.99404C9.992 10.7325 13.649 15.239 14.5955 16.3435C14.6227 16.3755 14.6566 16.4012 14.6948 16.4187C14.7329 16.4362 14.7745 16.4452 14.8165 16.445C14.8585 16.4448 14.8999 16.4355 14.9379 16.4176C14.9759 16.3997 15.0096 16.3738 15.0365 16.3415C15.967 15.2335 19.5465 10.7305 19.5465 6.99454C19.5466 6.36717 19.4231 5.74594 19.183 5.16631C18.943 4.58668 18.5911 4.06001 18.1475 3.61637C17.7039 3.17273 17.1773 2.82081 16.5977 2.58072C16.0181 2.34062 15.3964 2.21704 14.769 2.21704ZM14.769 8.77904C14.416 8.77894 14.0709 8.67417 13.7774 8.47797C13.484 8.28177 13.2553 8.00296 13.1202 7.67678C12.9852 7.35061 12.9499 6.99172 13.0189 6.6455C13.0878 6.29927 13.2578 5.98127 13.5075 5.73168C13.7571 5.48209 14.0752 5.31214 14.4214 5.2433C14.7677 5.17447 15.1266 5.20985 15.4527 5.34496C15.7788 5.48008 16.0576 5.70887 16.2537 6.0024C16.4498 6.29593 16.5545 6.64102 16.5545 6.99404C16.5545 7.22845 16.5083 7.46056 16.4186 7.67713C16.3289 7.8937 16.1974 8.09047 16.0317 8.25623C15.8659 8.42198 15.6692 8.55346 15.4526 8.64317C15.236 8.73287 15.0034 8.77904 14.769 8.77904ZM17.395 13.0625L21.25 12.468L17.395 13.0625ZM2.75 15.3195L12.66 13.792L2.75 15.3195ZM8.954 14.363L7.084 3.28304L8.954 14.363Z",fill:"#235DFF"}),r.jsx("path",{d:"M17.395 13.0625L21.25 12.468M2.75 15.3195L12.66 13.792M8.954 14.363L7.084 3.28304M14.769 2.21704C13.5021 2.21704 12.287 2.72033 11.3912 3.61619C10.4953 4.51205 9.992 5.7271 9.992 6.99404C9.992 10.7325 13.649 15.239 14.5955 16.3435C14.6227 16.3755 14.6566 16.4012 14.6948 16.4187C14.7329 16.4362 14.7745 16.4452 14.8165 16.445C14.8585 16.4448 14.8999 16.4355 14.9379 16.4176C14.9759 16.3997 15.0096 16.3738 15.0365 16.3415C15.967 15.2335 19.5465 10.7305 19.5465 6.99454C19.5466 6.36717 19.4231 5.74594 19.183 5.16631C18.943 4.58668 18.5911 4.06001 18.1475 3.61637C17.7039 3.17273 17.1773 2.82081 16.5977 2.58072C16.0181 2.34062 15.3964 2.21704 14.769 2.21704ZM14.769 8.77904C14.416 8.77894 14.0709 8.67417 13.7774 8.47797C13.484 8.28177 13.2553 8.00296 13.1202 7.67678C12.9852 7.35061 12.9499 6.99172 13.0189 6.6455C13.0878 6.29928 13.2578 5.98127 13.5075 5.73168C13.7571 5.48209 14.0752 5.31214 14.4214 5.2433C14.7677 5.17447 15.1266 5.20985 15.4527 5.34496C15.7788 5.48008 16.0576 5.70887 16.2537 6.0024C16.4498 6.29593 16.5545 6.64102 16.5545 6.99404C16.5545 7.22845 16.5083 7.46056 16.4186 7.67713C16.3289 7.8937 16.1974 8.09047 16.0317 8.25623C15.8659 8.42198 15.6692 8.55346 15.4526 8.64317C15.236 8.73287 15.0034 8.77904 14.769 8.77904Z",stroke:"#235DFF",strokeLinecap:"round",strokeLinejoin:"round"})]}),ce=[{region_id:1,label:"🏙️ Центр и Даунтаун",description:"Даунтаун и центр города — сердце Дубая. Здесь находятся Бурдж-Халифа, Dubai Mall, поющие фонтаны и лучшие туристические отели.",selected:!1,regions:["Шейх Заед"]},{region_id:2,label:"✅ Бизнес и деловые районы",description:"Бизнес Бей, Аль Хабтур Сити и улица Шейх Зайд – районы с офисами, высотками и современными отелями. Отличный выбор для деловых поездок.",selected:!1,regions:["Шейх Заед"]},{region_id:3,label:"🧕 Исторический Дубай",description:"Районы Дейра и Бур Дубай – старый город с рынками, музеями и атмосферой настоящего Востока. Здесь много недорогих и уютных отелей.",selected:!1,regions:["Дейра"]},{region_id:4,label:"🏖️ Пляжные районы Джумейры",description:"Джумейра и Аль Барша – спокойные жилые районы с пляжами, уютными кафе и семейными отелями. Подходят для размеренного отдыха.",selected:!1,regions:["Аль Барша"]},{region_id:5,label:"🌆 Дубай Марина и тусовка",description:"Современные высотки, яхты, ночная жизнь и модные рестораны. Отлично подойдёт молодым путешественникам и парам.",selected:!1,regions:["Дубай Марина"]},{region_id:6,label:"🌴 Острова и люкс-курорты",description:"Пальма Джумейра и Остров Мира – это элитный курортный отдых, частные пляжи, резорты и виллы премиум-класса.",selected:!1,regions:["Остров Мира"]},{region_id:7,label:"🏜️ Пустыня и сафари-отели",description:"Уединённые отели за городом. Здесь можно насладиться звёздным небом, тишиной и пустынным пейзажем. Подходят для романтики и wellness-отдыха.",selected:!1,regions:["Отели в пустыне"]},{region_id:8,label:"🏗️ Промзона и удалённые районы",description:"Джебель-Али, Nad Al Sheba и схожие зоны – здесь редко, но встречаются хорошие отели. Обычно это более бюджетный и спокойный вариант.",selected:!1,regions:["Джебель-Али"]},{region_id:9,label:"🎢 Парк развлечений",description:"Dubai Parks and Resorts – зоны с тематическими парками (Legoland, Motiongate). Отличный выбор для семей с детьми.",selected:!1,regions:["Парк Дубаи"]}],tt=({darkmode:n,setSelectedRegions:c,selectedRegions:a})=>{const[e,t]=D.useState(!1),[l,d]=D.useState(()=>ce.filter(s=>s.selected).map(s=>s.region_id)),x=s=>{let g;l.includes(s)?g=l.filter(u=>u!==s):g=[...l,s],d(g);const f=ce.filter(u=>g.includes(u.region_id)).flatMap(u=>u.regions);c(f)};return r.jsxs("div",{children:[r.jsxs("div",{onClick:()=>{t(!0)},className:"mx-[10px] bg-white p-[15px] dark:bg-[#272829] dark:text-white rounded-lg flex  justify-between items-center cursor-pointer",children:[r.jsxs("div",{className:"flex items-center gap-[5px]",children:[r.jsx(et,{}),"Поможем выбрать район",r.jsxs("span",{className:"text-[#235DFF] font-medium",children:["(",l.length,")"]})]}),r.jsx(Fe,{fill:n?"#fff":"#042B50"})]}),r.jsx(fe,{close:()=>t(!1),modal:e,heightModal:"min-h-[20vh] max-h-[80vh]",btnShow:!1,translateY:"translate-y-[80vh]",content:r.jsx("div",{className:"flex flex-col gap-3  w-full  py-2 ",children:ce==null?void 0:ce.map((s,g)=>{const f=l.includes(s.region_id);return r.jsxs("div",{className:"bg-white dark:bg-[#272829] dark:text-white p-4 w-full rounded-xl flex flex-col gap-3",children:[r.jsxs("div",{className:"font-medium flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",className:" dark:text-black",checked:f,onChange:()=>x(s.region_id)}),s==null?void 0:s.label]}),r.jsx("div",{className:" text-sm leading-[20px]",children:s==null?void 0:s.description})]},g)})})})]})},ve={lat:41.2995,lng:69.2401},nt=({darkmode:n,setModalMap:c,items:a,loading:e,isError:t})=>{var w,A,F,J,Z,I,O,m,$,B,b,j,P,V,o,i,h,k,_,v,M,C,U,L,W,K,q;const l=xe(),[d,x]=D.useState(!1),[s,g]=D.useState(null),{t:f}=me(),u=a!=null&&a.length?{lat:Number((J=(F=(A=(w=a[0])==null?void 0:w.hotel)==null?void 0:A.detail)==null?void 0:F.location)==null?void 0:J.latitude)||ve.lat,lng:Number((m=(O=(I=(Z=a[0])==null?void 0:Z.hotel)==null?void 0:I.detail)==null?void 0:O.location)==null?void 0:m.longitude)||ve.lng}:ve,p=R=>({url:`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="130" height="45">
          <rect x="0" y="0" width="115" height="28" rx="6" fill="#1E3A8A" />
          <text x="55" y="16" font-size="15" font-family="Arial" fill="white" text-anchor="middle" alignment-baseline="middle">${Pe(R)} so'm</text>
          <polygon points="20,20 50,20 40,40" fill="#1E3A8A" />
        </svg>`)}`,scaledSize:{width:120,height:45}}),T=(R,z,te)=>{const re=[];te==null||te.forEach(G=>{var ae,ie,y,E,S,X;const ne=new z.Marker({position:{lat:Number((y=(ie=(ae=G==null?void 0:G.hotel)==null?void 0:ae.detail)==null?void 0:ie.location)==null?void 0:y.latitude),lng:Number((X=(S=(E=G==null?void 0:G.hotel)==null?void 0:E.detail)==null?void 0:S.location)==null?void 0:X.longitude)},map:R,icon:p(G==null?void 0:G.converted_price_number)});ne.addListener("click",()=>{g(G),x(!0)}),re.push(ne)}),new He({markers:re,map:R})};return e?r.jsx("div",{className:"absolute left-0 bottom-0 top-0 right-0 bg-[#09101D99] flex justify-center items-center z-9999 text-white",children:"...loading"}):r.jsxs("div",{className:"flex flex-col relative",children:[r.jsx("button",{onClick:()=>{c(!1)},className:"  absolute  top-3 left-3 z-999 cursor-pointer   dark:text-white  bg-white dark:bg-[#141414]",children:r.jsx(Re,{fill:n?"#fff":"#141414",className:""})}),r.jsx("div",{style:{height:"100vh",width:"100vw"},children:r.jsx(Ke,{bootstrapURLKeys:{key:"AIzaSyCSMfF7b-Kc8YtKBU4rj0qo2BBlrOxRKbs"},defaultCenter:u,defaultZoom:11,options:{gestureHandling:"greedy"},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:({map:R,maps:z})=>{T(R,z,a)}})}),r.jsx(fe,{close:()=>x(!1),setModal:x,modal:d,btnShow:!1,darkmode:n,content:r.jsxs("div",{className:" flex gap-[10px] p-3	 mb-[15px] mt-[15px] overflow-hidden w-full rounded-[18.07px] bg-white dark:bg-[#272829]",children:[r.jsxs("div",{className:"relative h-[132px] min-w-[150px]  max-w-[150px] overflow-hidden",children:[((B=($=s==null?void 0:s.hotel)==null?void 0:$.photos)==null?void 0:B.length)>0?r.jsx("img",{src:(j=(b=s==null?void 0:s.hotel)==null?void 0:b.photos[3])==null?void 0:j.full_path,loading:"lazy",className:"w-full h-full object-cover rounded-[18.07px]",alt:""}):r.jsx("img",{onError:R=>{R.target.src="https://cdn0.hitched.co.uk/vendor/4332/3_2/1280/png/frame-1_4_24332-169089063311545.webp"},loading:"lazy",src:((P=s==null?void 0:s.hotel)==null?void 0:P.hotel_url)+((V=s==null?void 0:s.hotel)==null?void 0:V.main_photo),className:"w-full h-full object-cover  rounded-[18.07px]",alt:""}),r.jsxs("div",{className:"absolute z-20 top-2 left-2 inline-flex gap-1 items-center bg-white rounded-[10px] px-[8.5px] py-[5.5px]",children:[r.jsx("img",{src:"/images/star.svg",alt:""}),r.jsx("p",{className:"font-medium text-sm",children:(o=s==null?void 0:s.hotel)==null?void 0:o.star})]})]}),r.jsxs("div",{className:" flex flex-col  justify-between",children:[r.jsxs("div",{children:[r.jsx(Ie,{darkmode:n,size:"[17px]",weight:"medium",className:" cursor-pointer hover:underline   line-clamp-1  !my-0 !block !text-[#141414]",text:(i=s==null?void 0:s.hotel)==null?void 0:i.name,color:"#141414",className_span:"  line-clamp-1",onClick:()=>{l(`/hotels/detail/${window.location.search}&catclaim=${s==null?void 0:s.id}&hotel_key=${s==null?void 0:s.hotel_key}&converted_price=${s==null?void 0:s.converted_price_number}`)}}),r.jsxs("p",{className:" text-base font-normal dark:text-white",children:[(k=(h=s==null?void 0:s.hotel)==null?void 0:h.state)==null?void 0:k.name," ",s!=null&&s.town_name&&((v=(_=s==null?void 0:s.hotel)==null?void 0:_.state)!=null&&v.name)?", ":null," ",s==null?void 0:s.town_name]}),(U=(C=(M=s==null?void 0:s.hotel)==null?void 0:M.detail)==null?void 0:C.ratings)!=null&&U.overall?r.jsx("div",{className:" inline-flex gap-10  items-center text-white bg-white dark:bg-[#272829] rounded-[10px] h-[30px] py-[10px]",children:r.jsxs("div",{className:"flex gap-[5px] ",children:[r.jsx("div",{className:" text-[#141414] dark:text-white text-[17px] font-normal",children:(K=(W=(L=s==null?void 0:s.hotel)==null?void 0:L.detail)==null?void 0:W.ratings)==null?void 0:K.overall}),n?r.jsx("img",{className:"pl-1",src:"/images/tripadvisor-white.svg",alt:""}):r.jsx("img",{src:"/images/tripadvisor.svg",alt:""})," "]})}):null]}),r.jsx("div",{className:" flex gap-3 justify-between w-full relative",children:r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("p",{className:"font-medium text-xl text-[#235DFF]",children:[(q=s==null?void 0:s.converted_price_number)==null?void 0:q.toLocaleString()," ",f("home.uzs")]})})})]})]})})]})};var Le={},pe={},we={},oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.Direction=void 0;var Ne;(function(n){n.Right="to right",n.Left="to left",n.Down="to bottom",n.Up="to top"})(Ne||(oe.Direction=Ne={}));(function(n){var c=ee&&ee.__spreadArray||function(o,i,h){if(h||arguments.length===2)for(var k=0,_=i.length,v;k<_;k++)(v||!(k in i))&&(v||(v=Array.prototype.slice.call(i,0,k)),v[k]=i[k]);return o.concat(v||Array.prototype.slice.call(i))};Object.defineProperty(n,"__esModule",{value:!0}),n.isIOS=n.useThumbOverlap=n.assertUnreachable=n.voidFn=n.getTrackBackground=n.replaceAt=n.schd=n.translate=n.getClosestThumbIndex=n.translateThumbs=n.getPaddingAndBorder=n.getMargin=n.checkInitialOverlap=n.checkValuesAgainstBoundaries=n.checkBoundaries=n.isVertical=n.relativeValue=n.normalizeValue=n.isStepDivisible=n.isTouchEvent=n.getStepDecimals=void 0;var a=D,e=oe,t=function(o){var i=o.toString().split(".")[1];return i?i.length:0};n.getStepDecimals=t;function l(o){return o.touches&&o.touches.length||o.changedTouches&&o.changedTouches.length}n.isTouchEvent=l;function d(o,i,h){var k=(i-o)/h,_=8,v=Number(k.toFixed(_));return parseInt(v.toString(),10)===v}n.isStepDivisible=d;function x(o,i,h,k,_,v,M){var C=1e11;if(o=Math.round(o*C)/C,!v){var U=M[i-1],L=M[i+1];if(U&&U>o)return U;if(L&&L<o)return L}if(o>k)return k;if(o<h)return h;var W=Math.floor(o*C-h*C)%Math.floor(_*C),K=Math.floor(o*C-Math.abs(W)),q=W===0?o:K/C,R=Math.abs(W/C)<_/2?q:q+_,z=(0,n.getStepDecimals)(_);return parseFloat(R.toFixed(z))}n.normalizeValue=x;function s(o,i,h){return(o-i)/(h-i)}n.relativeValue=s;function g(o){return o===e.Direction.Up||o===e.Direction.Down}n.isVertical=g;function f(o,i,h){if(i>=h)throw new RangeError("min (".concat(i,") is equal/bigger than max (").concat(h,")"));if(o<i)throw new RangeError("value (".concat(o,") is smaller than min (").concat(i,")"));if(o>h)throw new RangeError("value (".concat(o,") is bigger than max (").concat(h,")"))}n.checkBoundaries=f;function u(o,i,h){return o<i?i:o>h?h:o}n.checkValuesAgainstBoundaries=u;function p(o){if(!(o.length<2)&&!o.slice(1).every(function(i,h){return o[h]<=i}))throw new RangeError("values={[".concat(o,"]} needs to be sorted when allowOverlap={false}"))}n.checkInitialOverlap=p;function T(o){var i=window.getComputedStyle(o);return{top:parseInt(i["margin-top"],10),bottom:parseInt(i["margin-bottom"],10),left:parseInt(i["margin-left"],10),right:parseInt(i["margin-right"],10)}}n.getMargin=T;function w(o){var i=window.getComputedStyle(o);return{top:parseInt(i["padding-top"],10)+parseInt(i["border-top-width"],10),bottom:parseInt(i["padding-bottom"],10)+parseInt(i["border-bottom-width"],10),left:parseInt(i["padding-left"],10)+parseInt(i["border-left-width"],10),right:parseInt(i["padding-right"],10)+parseInt(i["border-right-width"],10)}}n.getPaddingAndBorder=w;function A(o,i,h){var k=h?-1:1;o.forEach(function(_,v){return J(_,k*i[v].x,i[v].y)})}n.translateThumbs=A;function F(o,i,h,k){for(var _=0,v=P(o[0],i,h,k),M=1;M<o.length;M++){var C=P(o[M],i,h,k);C<v&&(v=C,_=M)}return _}n.getClosestThumbIndex=F;function J(o,i,h){o.style.transform="translate(".concat(i,"px, ").concat(h,"px)")}n.translate=J;var Z=function(o){var i=[],h=null,k=function(){for(var _=[],v=0;v<arguments.length;v++)_[v]=arguments[v];i=_,!h&&(h=requestAnimationFrame(function(){h=null,o.apply(void 0,i)}))};return k};n.schd=Z;function I(o,i,h){var k=o.slice(0);return k[i]=h,k}n.replaceAt=I;function O(o){var i=o.values,h=o.colors,k=o.min,_=o.max,v=o.direction,M=v===void 0?e.Direction.Right:v,C=o.rtl,U=C===void 0?!1:C;U&&M===e.Direction.Right?M=e.Direction.Left:U&&e.Direction.Left&&(M=e.Direction.Right);var L=i.slice(0).sort(function(K,q){return K-q}).map(function(K){return(K-k)/(_-k)*100}),W=L.reduce(function(K,q,R){return"".concat(K,", ").concat(h[R]," ").concat(q,"%, ").concat(h[R+1]," ").concat(q,"%")},"");return"linear-gradient(".concat(M,", ").concat(h[0]," 0%").concat(W,", ").concat(h[h.length-1]," 100%)")}n.getTrackBackground=O;function m(){}n.voidFn=m;function $(o){throw new Error("Didn't expect to get here")}n.assertUnreachable=$;var B=function(o,i,h,k,_){_===void 0&&(_=function(M){return M});var v=Math.ceil(c([o],Array.from(o.children),!0).reduce(function(M,C){var U=Math.ceil(C.getBoundingClientRect().width);if(C.innerText&&C.innerText.includes(h)&&C.childElementCount===0){var L=C.cloneNode(!0);L.innerHTML=_(i.toFixed(k)),L.style.visibility="hidden",document.body.appendChild(L),U=Math.ceil(L.getBoundingClientRect().width),document.body.removeChild(L)}return U>M?U:M},o.getBoundingClientRect().width));return v},b=function(o,i,h,k,_,v,M){M===void 0&&(M=function(L){return L});var C=[],U=function(L){var W=B(h[L],k[L],_,v,M),K=i[L].x;i.forEach(function(q,R){var z=q.x,te=B(h[R],k[R],_,v,M);L!==R&&(K>=z&&K<=z+te||K+W>=z&&K+W<=z+te)&&(C.includes(R)||(C.push(L),C.push(R),C=c(c([],C,!0),[L,R],!1),U(R)))})};return U(o),Array.from(new Set(C.sort()))},j=function(o,i,h,k,_,v){k===void 0&&(k=.1),_===void 0&&(_=" - "),v===void 0&&(v=function(R){return R});var M=(0,n.getStepDecimals)(k),C=(0,a.useState)({}),U=C[0],L=C[1],W=(0,a.useState)(v(i[h].toFixed(M))),K=W[0],q=W[1];return(0,a.useEffect)(function(){if(o){var R=o.getThumbs();if(R.length<1)return;var z={},te=o.getOffsets(),re=b(h,te,R,i,_,M,v),G=v(i[h].toFixed(M));if(re.length){var ne=re.reduce(function(S,X,Q,H){return S.length?c(c([],S,!0),[te[H[Q]].x],!1):[te[H[Q]].x]},[]);if(Math.min.apply(Math,ne)===te[h].x){var ae=[];re.forEach(function(S){ae.push(i[S].toFixed(M))}),G=Array.from(new Set(ae.sort(function(S,X){return parseFloat(S)-parseFloat(X)}))).map(v).join(_);var ie=Math.min.apply(Math,ne),y=Math.max.apply(Math,ne),E=R[re[ne.indexOf(y)]].getBoundingClientRect().width;z.left="".concat(Math.abs(ie-(y+E))/2,"px"),z.transform="translate(-50%, 0)"}else z.visibility="hidden"}q(G),L(z)}},[o,i]),[K,U]};n.useThumbOverlap=j;function P(o,i,h,k){var _=o.getBoundingClientRect(),v=_.left,M=_.top,C=_.width,U=_.height;return g(k)?Math.abs(h-(M+U/2)):Math.abs(i-(v+C/2))}var V=function(){var o,i=((o=navigator.userAgentData)===null||o===void 0?void 0:o.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(i)||navigator.userAgent.includes("Mac")&&"ontouchend"in document};n.isIOS=V})(we);var rt=ee&&ee.__extends||function(){var n=function(c,a){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])},n(c,a)};return function(c,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");n(c,a);function e(){this.constructor=c}c.prototype=a===null?Object.create(a):(e.prototype=a.prototype,new e)}}(),at=ee&&ee.__createBinding||(Object.create?function(n,c,a,e){e===void 0&&(e=a);var t=Object.getOwnPropertyDescriptor(c,a);(!t||("get"in t?!c.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return c[a]}}),Object.defineProperty(n,e,t)}:function(n,c,a,e){e===void 0&&(e=a),n[e]=c[a]}),st=ee&&ee.__setModuleDefault||(Object.create?function(n,c){Object.defineProperty(n,"default",{enumerable:!0,value:c})}:function(n,c){n.default=c}),it=ee&&ee.__importStar||function(n){if(n&&n.__esModule)return n;var c={};if(n!=null)for(var a in n)a!=="default"&&Object.prototype.hasOwnProperty.call(n,a)&&at(c,n,a);return st(c,n),c},Se=ee&&ee.__spreadArray||function(n,c,a){if(a||arguments.length===2)for(var e=0,t=c.length,l;e<t;e++)(l||!(e in c))&&(l||(l=Array.prototype.slice.call(c,0,e)),l[e]=c[e]);return n.concat(l||Array.prototype.slice.call(c))};Object.defineProperty(pe,"__esModule",{value:!0});var he=it(D),N=we,Y=oe,lt=["ArrowRight","ArrowUp","k","PageUp"],ot=["ArrowLeft","ArrowDown","j","PageDown"],ct=function(n){rt(c,n);function c(a){var e=n.call(this,a)||this;if(e.trackRef=he.createRef(),e.thumbRefs=[],e.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(e.props.values.length).fill(0).map(function(t,l){return l}),isChanged:!1,markOffsets:[]},e.getOffsets=function(){var t=e.props,l=t.direction,d=t.values,x=t.min,s=t.max,g=e.trackRef.current;if(!g)return console.warn("No track element found."),[];var f=g.getBoundingClientRect(),u=(0,N.getPaddingAndBorder)(g);return e.getThumbs().map(function(p,T){var w={x:0,y:0},A=p.getBoundingClientRect(),F=(0,N.getMargin)(p);switch(l){case Y.Direction.Right:return w.x=(F.left+u.left)*-1,w.y=((A.height-f.height)/2+u.top)*-1,w.x+=f.width*(0,N.relativeValue)(d[T],x,s)-A.width/2,w;case Y.Direction.Left:return w.x=(F.right+u.right)*-1,w.y=((A.height-f.height)/2+u.top)*-1,w.x+=f.width-f.width*(0,N.relativeValue)(d[T],x,s)-A.width/2,w;case Y.Direction.Up:return w.x=((A.width-f.width)/2+F.left+u.left)*-1,w.y=-u.left,w.y+=f.height-f.height*(0,N.relativeValue)(d[T],x,s)-A.height/2,w;case Y.Direction.Down:return w.x=((A.width-f.width)/2+F.left+u.left)*-1,w.y=-u.left,w.y+=f.height*(0,N.relativeValue)(d[T],x,s)-A.height/2,w;default:return(0,N.assertUnreachable)(l)}})},e.getThumbs=function(){return e.trackRef&&e.trackRef.current?Array.from(e.trackRef.current.children).filter(function(t){return t.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},e.getTargetIndex=function(t){return e.getThumbs().findIndex(function(l){return l===t.target||l.contains(t.target)})},e.addTouchEvents=function(t){document.addEventListener("touchmove",e.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",e.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",e.schdOnEnd,{passive:!1})},e.addMouseEvents=function(t){document.addEventListener("mousemove",e.schdOnMouseMove),document.addEventListener("mouseup",e.schdOnEnd)},e.onMouseDownTrack=function(t){var l;if(!(t.button!==0||(0,N.isIOS)()))if(t.persist(),t.preventDefault(),e.addMouseEvents(t.nativeEvent),e.props.values.length>1&&e.props.draggableTrack){if(e.thumbRefs.some(function(x){var s;return(s=x.current)===null||s===void 0?void 0:s.contains(t.target)}))return;e.setState({draggedTrackPos:[t.clientX,t.clientY]},function(){return e.onMove(t.clientX,t.clientY)})}else{var d=(0,N.getClosestThumbIndex)(e.thumbRefs.map(function(x){return x.current}),t.clientX,t.clientY,e.props.direction);(l=e.thumbRefs[d].current)===null||l===void 0||l.focus(),e.setState({draggedThumbIndex:d},function(){return e.onMove(t.clientX,t.clientY)})}},e.onResize=function(){(0,N.translateThumbs)(e.getThumbs(),e.getOffsets(),e.props.rtl),e.calculateMarkOffsets()},e.onTouchStartTrack=function(t){var l;if(t.persist(),e.addTouchEvents(t.nativeEvent),e.props.values.length>1&&e.props.draggableTrack){if(e.thumbRefs.some(function(x){var s;return(s=x.current)===null||s===void 0?void 0:s.contains(t.target)}))return;e.setState({draggedTrackPos:[t.touches[0].clientX,t.touches[0].clientY]},function(){return e.onMove(t.touches[0].clientX,t.touches[0].clientY)})}else{var d=(0,N.getClosestThumbIndex)(e.thumbRefs.map(function(x){return x.current}),t.touches[0].clientX,t.touches[0].clientY,e.props.direction);(l=e.thumbRefs[d].current)===null||l===void 0||l.focus(),e.setState({draggedThumbIndex:d},function(){return e.onMove(t.touches[0].clientX,t.touches[0].clientY)})}},e.onMouseOrTouchStart=function(t){if(!e.props.disabled){var l=(0,N.isTouchEvent)(t);if(!(!l&&t.button!==0)){var d=e.getTargetIndex(t);d!==-1&&(l?e.addTouchEvents(t):e.addMouseEvents(t),e.setState({draggedThumbIndex:d,thumbZIndexes:e.state.thumbZIndexes.map(function(x,s){return s===d?Math.max.apply(Math,e.state.thumbZIndexes):x<=e.state.thumbZIndexes[d]?x:x-1})}))}}},e.onMouseMove=function(t){t.preventDefault(),e.onMove(t.clientX,t.clientY)},e.onTouchMove=function(t){t.preventDefault(),e.onMove(t.touches[0].clientX,t.touches[0].clientY)},e.onKeyDown=function(t){var l=e.props,d=l.values,x=l.onChange,s=l.step,g=l.rtl,f=l.direction,u=e.state.isChanged,p=e.getTargetIndex(t.nativeEvent),T=g||f===Y.Direction.Left||f===Y.Direction.Down?-1:1;p!==-1&&(lt.includes(t.key)?(t.preventDefault(),e.setState({draggedThumbIndex:p,isChanged:!0}),x((0,N.replaceAt)(d,p,e.normalizeValue(d[p]+T*(t.key==="PageUp"?s*10:s),p)))):ot.includes(t.key)?(t.preventDefault(),e.setState({draggedThumbIndex:p,isChanged:!0}),x((0,N.replaceAt)(d,p,e.normalizeValue(d[p]-T*(t.key==="PageDown"?s*10:s),p)))):t.key==="Tab"?e.setState({draggedThumbIndex:-1},function(){u&&e.fireOnFinalChange()}):u&&e.fireOnFinalChange())},e.onKeyUp=function(t){var l=e.state.isChanged;e.setState({draggedThumbIndex:-1},function(){l&&e.fireOnFinalChange()})},e.onMove=function(t,l){var d=e.state,x=d.draggedThumbIndex,s=d.draggedTrackPos,g=e.props,f=g.direction,u=g.min,p=g.max,T=g.onChange,w=g.values,A=g.step,F=g.rtl;if(x===-1&&s[0]===-1&&s[1]===-1)return null;var J=e.trackRef.current;if(!J)return null;var Z=J.getBoundingClientRect(),I=(0,N.isVertical)(f)?Z.height:Z.width;if(s[0]!==-1&&s[1]!==-1){var O=t-s[0],m=l-s[1],$=0;switch(f){case Y.Direction.Right:case Y.Direction.Left:$=O/I*(p-u);break;case Y.Direction.Down:case Y.Direction.Up:$=m/I*(p-u);break;default:(0,N.assertUnreachable)(f)}if(F&&($*=-1),Math.abs($)>=A/2){for(var B=0;B<e.thumbRefs.length;B++){if(w[B]===p&&Math.sign($)===1||w[B]===u&&Math.sign($)===-1)return;var b=w[B]+$;b>p?$=p-w[B]:b<u&&($=u-w[B])}for(var j=w.slice(0),B=0;B<e.thumbRefs.length;B++)j=(0,N.replaceAt)(j,B,e.normalizeValue(w[B]+$,B));e.setState({draggedTrackPos:[t,l]}),T(j)}}else{var P=0;switch(f){case Y.Direction.Right:P=(t-Z.left)/I*(p-u)+u;break;case Y.Direction.Left:P=(I-(t-Z.left))/I*(p-u)+u;break;case Y.Direction.Down:P=(l-Z.top)/I*(p-u)+u;break;case Y.Direction.Up:P=(I-(l-Z.top))/I*(p-u)+u;break;default:(0,N.assertUnreachable)(f)}F&&(P=p+u-P),Math.abs(w[x]-P)>=A/2&&T((0,N.replaceAt)(w,x,e.normalizeValue(P,x)))}},e.normalizeValue=function(t,l){var d=e.props,x=d.min,s=d.max,g=d.step,f=d.allowOverlap,u=d.values;return(0,N.normalizeValue)(t,l,x,s,g,f,u)},e.onEnd=function(t){if(t.preventDefault(),document.removeEventListener("mousemove",e.schdOnMouseMove),document.removeEventListener("touchmove",e.schdOnTouchMove),document.removeEventListener("mouseup",e.schdOnEnd),document.removeEventListener("touchend",e.schdOnEnd),document.removeEventListener("touchcancel",e.schdOnEnd),e.state.draggedThumbIndex===-1&&e.state.draggedTrackPos[0]===-1&&e.state.draggedTrackPos[1]===-1)return null;e.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){e.fireOnFinalChange()})},e.fireOnFinalChange=function(){e.setState({isChanged:!1});var t=e.props,l=t.onFinalChange,d=t.values;l&&l(d)},e.updateMarkRefs=function(t){if(!t.renderMark){e.numOfMarks=void 0,e.markRefs=void 0;return}e.numOfMarks=(t.max-t.min)/e.props.step,e.markRefs=[];for(var l=0;l<e.numOfMarks+1;l++)e.markRefs[l]=he.createRef()},e.calculateMarkOffsets=function(){if(!(!e.props.renderMark||!e.trackRef||!e.numOfMarks||!e.markRefs||e.trackRef.current===null)){for(var t=window.getComputedStyle(e.trackRef.current),l=parseInt(t.width,10),d=parseInt(t.height,10),x=parseInt(t.paddingLeft,10),s=parseInt(t.paddingTop,10),g=[],f=0;f<e.numOfMarks+1;f++){var u=9999,p=9999;if(e.markRefs[f].current){var T=e.markRefs[f].current.getBoundingClientRect();u=T.height,p=T.width}e.props.direction===Y.Direction.Left||e.props.direction===Y.Direction.Right?g.push([Math.round(l/e.numOfMarks*f+x-p/2),-Math.round((u-d)/2)]):g.push([Math.round(d/e.numOfMarks*f+s-u/2),-Math.round((p-l)/2)])}e.setState({markOffsets:g})}},a.step===0)throw new Error('"step" property should be a positive number');return e.schdOnMouseMove=(0,N.schd)(e.onMouseMove),e.schdOnTouchMove=(0,N.schd)(e.onTouchMove),e.schdOnEnd=(0,N.schd)(e.onEnd),e.thumbRefs=a.values.map(function(){return he.createRef()}),e.updateMarkRefs(a),e}return c.prototype.componentDidMount=function(){var a=this,e=this.props,t=e.values,l=e.min,d=e.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",a.onResize)},unobserve:function(){return window.removeEventListener("resize",a.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,N.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(x){return(0,N.checkBoundaries)(x,a.props.min,a.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,N.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),t.forEach(function(x){(0,N.isStepDivisible)(l,x,d)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},c.prototype.componentDidUpdate=function(a,e){var t=this.props,l=t.max,d=t.min,x=t.step,s=t.values,g=t.rtl;(a.max!==l||a.min!==d||a.step!==x)&&this.updateMarkRefs(this.props),(0,N.translateThumbs)(this.getThumbs(),this.getOffsets(),g),(a.max!==l||a.min!==d||a.step!==x||e.markOffsets.length!==this.state.markOffsets.length)&&(this.calculateMarkOffsets(),s.forEach(function(f){(0,N.isStepDivisible)(d,f,x)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},c.prototype.componentWillUnmount=function(){var a={passive:!1};document.removeEventListener("mousedown",this.onMouseOrTouchStart,a),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},c.prototype.render=function(){var a=this,e=this.props,t=e.label,l=e.labelledBy,d=e.renderTrack,x=e.renderThumb,s=e.renderMark,g=s===void 0?function(){return null}:s,f=e.values,u=e.min,p=e.max,T=e.allowOverlap,w=e.disabled,A=this.state,F=A.draggedThumbIndex,J=A.thumbZIndexes,Z=A.markOffsets;return d({props:{style:{transform:"scale(1)",cursor:F>-1?"grabbing":this.props.draggableTrack?(0,N.isVertical)(this.props.direction)?"ns-resize":"ew-resize":f.length===1&&!w?"pointer":"inherit"},onMouseDown:w?N.voidFn:this.onMouseDownTrack,onTouchStart:w?N.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:w,children:Se(Se([],Z.map(function(I,O,m){return g({props:{style:a.props.direction===Y.Direction.Left||a.props.direction===Y.Direction.Right?{position:"absolute",left:"".concat(I[0],"px"),marginTop:"".concat(I[1],"px")}:{position:"absolute",top:"".concat(I[0],"px"),marginLeft:"".concat(I[1],"px")},key:"mark".concat(O),ref:a.markRefs[O]},index:O})}),!0),f.map(function(I,O){var m=a.state.draggedThumbIndex===O;return x({index:O,value:I,isDragged:m,props:{style:{position:"absolute",zIndex:J[O],cursor:w?"inherit":m?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:O,tabIndex:w?void 0:0,"aria-valuemax":T?p:f[O+1]||p,"aria-valuemin":T?u:f[O-1]||u,"aria-valuenow":I,draggable:!1,ref:a.thumbRefs[O],"aria-label":t,"aria-labelledby":l,role:"slider",onKeyDown:w?N.voidFn:a.onKeyDown,onKeyUp:w?N.voidFn:a.onKeyUp}})}),!0)})},c.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:Y.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},c}(he.Component);pe.default=ct;(function(n){var c=ee&&ee.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(n,"__esModule",{value:!0}),n.checkValuesAgainstBoundaries=n.relativeValue=n.useThumbOverlap=n.Direction=n.getTrackBackground=n.Range=void 0;var a=c(pe);n.Range=a.default;var e=we;Object.defineProperty(n,"getTrackBackground",{enumerable:!0,get:function(){return e.getTrackBackground}}),Object.defineProperty(n,"useThumbOverlap",{enumerable:!0,get:function(){return e.useThumbOverlap}}),Object.defineProperty(n,"relativeValue",{enumerable:!0,get:function(){return e.relativeValue}}),Object.defineProperty(n,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return e.checkValuesAgainstBoundaries}});var t=oe;Object.defineProperty(n,"Direction",{enumerable:!0,get:function(){return t.Direction}})})(Le);const dt=({modal:n,setModal:c,filter_option:a})=>{var I,O,m,$,B;const{search:e}=De(),t=xe(),l=Ae(),{t:d,i18n:x}=me(),[s,g]=D.useState([0,0]),[f,u]=D.useState([]),[p,T]=D.useState([]),[w,A]=D.useState(!1);w||p.slice(0,5);const F=b=>{u(j=>j.includes(+b)?j.filter(P=>P!==+b):[...j,+b])},J=b=>{g(b)};D.useEffect(()=>{var b,j,P,V;(b=a==null?void 0:a.price_range)!=null&&b.min&&((j=a==null?void 0:a.price_range)!=null&&j.max)&&g([(P=a==null?void 0:a.price_range)==null?void 0:P.min,(V=a==null?void 0:a.price_range)==null?void 0:V.max])},[a]),D.useEffect(()=>{const b=new URLSearchParams(e),j=b.get("price_min"),P=b.get("price_max");l!=null&&l.price_min&&(l!=null&&l.price_max)&&g([Number(j),Number(P)]);const V=b.getAll("stars[]").map(Number);u(V.length?V==null?void 0:V.map(i=>Number(i)):[]);const o=b.getAll("tags[]").map(Number);T(i=>i.map(h=>({...h,selected:o.includes(h.id)})))},[e,a]);const Z=()=>{const b=new URLSearchParams(e);b.delete("price_min"),b.delete("price_max"),b.delete("stars[]"),b.delete("tags[]"),b.append("price_min",s[0]),b.append("price_max",s[1]),f.forEach(j=>{b.append("stars[]",j)}),p.filter(j=>j.selected).forEach(j=>{b.append("tags[]",j.id)}),t(`?${b.toString()}`),c(!1)};return r.jsx("div",{className:"w-full",children:r.jsx(fe,{close:()=>c(!1),modal:n,heightModal:"min-h-[20vh] max-h-[80vh]",btnShow:!1,translateY:"translate-y-[80vh]",content:r.jsxs("div",{className:"w-full",children:[r.jsx("div",{className:"flex items-center justify-between w-full gap-3 mb-2",children:r.jsx("p",{className:"font-semibold text-[20px] text-[#141414] dark:text-white",children:d("home.filters")})}),r.jsxs("div",{className:"mb-6 bg-white dark:bg-[#272829] rounded-xl pt-[15px] py-[25px] px-[10px]",children:[r.jsx("label",{className:"block text-[17px] font-medium mb-2 dark:text-white ",children:"Ваш бюджет"}),r.jsxs("div",{className:"flex gap-3 mb-6",children:[r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsx("label",{htmlFor:"",className:"text-[#76787A] text-sm",children:d("home.from")}),r.jsxs("div",{className:"bg-[#EBF0F5] dark:bg-[#141414] dark:text-[#76787A] rounded-lg p-[10px] text-[#141414] text-[17px] text-center",children:[(I=s[0])==null?void 0:I.toLocaleString()," ",d("home.uzs")]})]}),r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsx("label",{htmlFor:"",className:"text-[#76787A] text-sm",children:d("home.until")}),r.jsxs("div",{className:"bg-[#EBF0F5] dark:bg-[#141414] dark:text-[#76787A] rounded-lg p-[10px] w-full text-[#141414] text-[17px]  text-center",children:[(O=s[1])==null?void 0:O.toLocaleString()," ",d("home.uzs")]})]})]}),r.jsx("div",{className:"px-3",children:r.jsx(Le.Range,{values:s,step:1e5,min:(m=a==null?void 0:a.price_range)==null?void 0:m.min,max:($=a==null?void 0:a.price_range)==null?void 0:$.max,onChange:J,renderTrack:({props:b,children:j})=>{var P,V,o,i,h,k;return r.jsxs("div",{...b,style:{...b.style,height:"6px",backgroundColor:"#ddd",position:"relative"},children:[r.jsx("div",{style:{position:"absolute",top:0,left:`${(s[0]-((P=a==null?void 0:a.price_range)==null?void 0:P.min))/(((V=a==null?void 0:a.price_range)==null?void 0:V.max)-((o=a==null?void 0:a.price_range)==null?void 0:o.min))*100}%`,right:`${100-(s[1]-((i=a==null?void 0:a.price_range)==null?void 0:i.min))/(((h=a==null?void 0:a.price_range)==null?void 0:h.max)-((k=a==null?void 0:a.price_range)==null?void 0:k.min))*100}%`,height:"6px",backgroundColor:"#4A90E2"}}),j]})},renderThumb:({props:b})=>r.jsx("div",{...b,style:{...b.style,height:"28px",width:"28px",boxShadow:"0px 6px 13px 0px #0000001F",borderRadius:"50%",backgroundColor:"#fff",outline:"none"}})})})]}),r.jsxs("div",{className:"mb-6 bg-white dark:bg-[#272829] rounded-xl py-[15px] px-[10px]",children:[r.jsx("label",{className:"block text-[17px] font-medium mb-2 dark:text-white ",children:d("home.stardom")}),r.jsx("div",{className:"flex space-x-2",children:(B=a==null?void 0:a.star_keys)==null?void 0:B.map((b,j)=>r.jsxs("button",{onClick:()=>F(Number(b)),className:`px-8 py-2 bg-[#EBF0F5] dark:bg-[#141414] dark:text-[#76787A] rounded-3xl gap-1 flex items-center justify-center text-sm ${f.includes(Number(b))?"!bg-[#235DFF] text-white dark:!text-white":""}`,children:[r.jsx("img",{src:"/images/star.svg",alt:""})," ",b]},j))})]}),r.jsx("button",{onClick:()=>{Z()},className:"mt-4 mb-4 w-full py-2 bg-[#1C4ACC] text-white rounded-[12px]",children:d("home.save")})," "]})})})},ut=({modal:n,setModal:c,list:a,setItems:e,setSelectedSort:t,selectedSort:l=""})=>{const{t:d}=me(),x=g=>{t(g)},s=()=>{e(g=>{let f=[...g];switch(l){case"recommended":f.sort((u,p)=>{var T,w,A,F;return Number((w=(T=p.hotel)==null?void 0:T.rating)==null?void 0:w.rating)-Number((F=(A=u.hotel)==null?void 0:A.rating)==null?void 0:F.rating)});break;case"cheapest":f.sort((u,p)=>u.converted_price_number-p.converted_price_number);break;case"expensive":f.sort((u,p)=>p.converted_price_number-u.converted_price_number);break;case"best-rating-low-price":f.sort((u,p)=>{var T,w,A,F;return Number((w=(T=p.hotel)==null?void 0:T.rating)==null?void 0:w.rating)-Number((F=(A=u.hotel)==null?void 0:A.rating)==null?void 0:F.rating)||u.converted_price_number-p.converted_price_number});break;default:return g}return f}),c(!1)};return r.jsx("div",{className:"w-full",children:r.jsx(fe,{close:()=>c(!1),modal:n,heightModal:"min-h-[20vh] max-h-[80vh]",btnShow:!1,translateY:"translate-y-[80vh]",content:r.jsxs("div",{className:"w-full",children:[r.jsx("div",{className:"flex items-center justify-between w-full gap-3",children:r.jsx("p",{className:"font-medium text-lg dark:text-white",children:"Сортировка"})}),r.jsx("div",{className:"mt-[20px] gap-3 flex flex-col",children:a==null?void 0:a.map((g,f)=>r.jsx("div",{onClick:()=>x(g==null?void 0:g.value),className:"flex items-center justify-between gap-3 px-3 rounded-xl bg-white dark:bg-[#272829] py-[15px] last:border-none cursor-pointer",children:r.jsxs("div",{className:"flex gap-3 justify-between w-full",children:[r.jsxs("div",{className:"flex  items-center gap-2",children:[r.jsx("img",{src:`/images/${g==null?void 0:g.icon}`,alt:""}),r.jsx("p",{className:"dark:text-white",children:g==null?void 0:g.name})]}),r.jsx("input",{type:"radio",checked:l===g.value,readOnly:!0,className:"cursor-pointer w-4"})]})},f))}),r.jsx("button",{onClick:s,className:"mt-4 mb-4 w-full py-2 bg-[#1C4ACC] text-white rounded-[12px]",children:d("home.save")})]})})})},je=n=>r.jsxs("div",{...n,className:"gap-2 cursor-pointer relative text-sm w-full   duration-200 bg-white dark:bg-[#272829] dark:text-[#FFFFFF] text-[#2B3F5A] rounded-lg h-[50px] flex justify-center items-center px-[15px]",children:[r.jsx("div",{className:"w-5 h-5",children:n==null?void 0:n.icon}),r.jsx("span",{className:"select-none dark:text-white",children:n!=null&&n.placeholder&&(n==null?void 0:n.value)===""?n==null?void 0:n.placeholder:n==null?void 0:n.title})]}),Te=()=>r.jsx("svg",{width:"19",height:"20",viewBox:"0 0 19 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M3.95848 8.40659C5.47862 11.7162 8.17917 14.3394 11.5316 15.7628L12.0699 16.0026C12.666 16.2681 13.3368 16.3146 13.9639 16.134C14.5909 15.9534 15.1342 15.5573 15.4978 15.0154L16.2016 13.9673C16.3117 13.8029 16.3563 13.6032 16.3266 13.4076C16.2968 13.212 16.1949 13.0346 16.0409 12.9104L13.6564 10.9866C13.5734 10.9197 13.4776 10.8702 13.375 10.8412C13.2724 10.8121 13.1649 10.8041 13.0591 10.8177C12.9533 10.8312 12.8513 10.866 12.7593 10.9199C12.6672 10.9738 12.587 11.0458 12.5235 11.1315L11.7857 12.1266C9.89172 11.1912 8.35867 9.6579 7.42361 7.76376L8.41794 7.02592C8.50364 6.9624 8.57561 6.88221 8.62954 6.79018C8.68347 6.69815 8.71825 6.59616 8.73178 6.49035C8.74531 6.38455 8.73732 6.27709 8.70828 6.17445C8.67925 6.07181 8.62977 5.97609 8.56282 5.89305L6.63907 3.50855C6.51485 3.35453 6.33747 3.25261 6.14185 3.22287C5.94624 3.19312 5.74657 3.23771 5.58219 3.34784L4.5269 4.05559C3.98176 4.42116 3.5841 4.96839 3.40475 5.59979C3.22541 6.23118 3.27604 6.90574 3.54761 7.5033L3.95848 8.40659Z",fill:"#00AA6C"})}),ht=async()=>{const{data:n}=await Ee().get(`/api/v1/somo-travel/tour-prices-content-map2${window.location.search}`);return(n==null?void 0:n.data)||[]},xt=({darkmode:n})=>{var G,ne,ae,ie;const{t:c}=me(),a=xe(),e=De(),t=Ae(),[l,d]=D.useState(!1),[x,s]=D.useState(!1),[g,f]=D.useState(!1),[u,p]=D.useState([]),[T,w]=D.useState(!0),[A,F]=D.useState(1),[J,Z]=D.useState(!1),[I,O]=D.useState(!1),[m,$]=D.useState({}),[B,b]=D.useState(!1),[j,P]=D.useState([]),[V,o]=D.useState("cheapest"),[i,h]=D.useState({adultCounter:2,childrenCount:0}),[k,_]=D.useState({}),[v,M]=D.useState({});D.useEffect(()=>{let y=window.location.search;W(y,1),window.scrollTo({top:0,behavior:"smooth"})},[]),D.useEffect(()=>{$(t),t!=null&&t.town_from_inc&&(t!=null&&t.tour_operator_id)&&M(y=>({...y,town_from_inc:t==null?void 0:t.town_from_inc,tour_operator_id:t==null?void 0:t.tour_operator_id,state_id:t==null?void 0:t.state_id,hotel_key:t==null?void 0:t.hotel_key,towns:+(t==null?void 0:t.towns)})),(t!=null&&t.adult||t!=null&&t.childs)&&h(y=>({...y,number_of_tourists:Number((t==null?void 0:t.adult)===void 0?2:t==null?void 0:t.adult)+Number((t==null?void 0:t.childs)===void 0?0:t==null?void 0:t.childs),childrenCount:Number((t==null?void 0:t.childs)===void 0?0:t==null?void 0:t.childs),adultCounter:Number((t==null?void 0:t.adult)===void 0?1:t==null?void 0:t.adult)})),window.scrollTo({top:0,behavior:"smooth"})},[]);const{data:C,isLoading:U,isError:L}=Be({queryKey:["hotelLocations",window.location.search],queryFn:()=>ht(),enabled:!!window.location.search,staleTime:1e3*60*5,cacheTime:1e3*60*10,refetchOnWindowFocus:!1}),W=(y,E)=>{y?s(!0):f(!0),Ee().get(`api/v1/somo-travel/tour-prices-content2${y===void 0?window.location.search:y}&page=${+E?+E:A}`).then(S=>{var Q,H,se,de;let X=(Q=S==null?void 0:S.data)==null?void 0:Q.data;Oe("result_count",{result_count:(se=(H=S==null?void 0:S.data)==null?void 0:H.data)==null?void 0:se.total}),h(le=>{var be,ye,ke;return{...le,widget:(ye=(be=S==null?void 0:S.data)==null?void 0:be.tour_data)==null?void 0:ye.widget,filters:(ke=S==null?void 0:S.data)==null?void 0:ke.filters}}),p(y?X:le=>[...le,...X]),F(le=>le+1),((de=X==null?void 0:X.data)==null?void 0:de.length)===0?w(!1):w(!0)}).catch(S=>{console.log(S)}).finally(()=>{y?s(!1):f(!1)})},K=()=>{let y=!0,E={};if(i!=null&&i.departure_date||(y=!1,E={...E,departure_date:!0}),i!=null&&i.number_of_tourists||(y=!1,E={...E,number_of_tourists:!0}),i!=null&&i.number_of_days||(y=!1,E={...E,number_of_days:!0}),y){const S={town_from_inc:v==null?void 0:v.town_from_inc,tour_operator_id:v==null?void 0:v.tour_operator_id,state_id:v==null?void 0:v.state_id,checkin:i==null?void 0:i.departure_date,nights:i==null?void 0:i.number_of_days,adult:i==null?void 0:i.adultCounter,childs:i==null?void 0:i.childrenCount,tour_somo_id:m==null?void 0:m.tour_somo_id,towns:v!=null&&v.towns?[v==null?void 0:v.towns]:[]},X=H=>{const[se,de,le]=H.split("-");return`${se}${de}${le}`},Q=Object.keys(S).map(H=>Array.isArray(S[H])?S[H].map(se=>`${H}[]=${encodeURIComponent(se)}`).join("&"):H==="checkin"?`${H}=${encodeURIComponent(X(S[H]))}`:`${H}=${encodeURIComponent(S[H])}`).join("&");a(`/hotels/result/?${Q}`),W("?"+Q,1),Z(!1),F(0)}else _(E),window.scrollTo({top:0,behavior:"smooth"})},q=y=>{const E=new URLSearchParams(e.search),X=E.getAll("stars[]").filter(Q=>Number(Q)!==Number(y));E.delete("stars[]"),X.forEach(Q=>E.append("stars[]",Q)),a(`?${E.toString()}`,{replace:!0})},R=(t==null?void 0:t.tags)||[],z=(t==null?void 0:t.stars)||[],te=(t==null?void 0:t.price_min)||0,re=(t==null?void 0:t.price_max)||1/0;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"  min-h-screen pb-[10px] bg-neutralSand dark:bg-[#141414] ",children:[r.jsxs("div",{className:"container_main !px-0",children:[r.jsx("div",{className:" fixed  container_main  z-999 w-full bg-white dark:bg-[#272829] rounded-bl-[20px] rounded-br-[20px]  h-[75px]  mb-3 p-[15px]",children:r.jsxs("div",{className:"flex items-center w-full  justify-between gap-[10px] ",children:[r.jsxs("div",{className:"flex gap-[10px]  items-center",children:[r.jsx(Re,{fill:n?"#fff":"#141414",onClick:()=>{a(`/hotels/tour-info/?town_from_inc=${m==null?void 0:m.town_from_inc}&tour_operator_id=${m==null?void 0:m.tour_operator_id}&state_id=${m==null?void 0:m.state_id}&checkin=${m==null?void 0:m.checkin}&nights=${m==null?void 0:m.nights}&adult=${m==null?void 0:m.adult}&childs=${m==null?void 0:m.childs}&tour_somo_id=${m==null?void 0:m.tour_somo_id}&towns[]=${m==null?void 0:m.towns}`)},className:"-translate-x-[15px]"}),r.jsx(ze,{darkmode:n})]}),r.jsx("img",{src:"/images/edit.svg",alt:"",loading:"lazy",className:" cursor-pointer p-[6px] w-8 h-8 bg-[#235DFF26] rounded-[10px]",onClick:()=>{Z(!0)}})]})}),x?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"container_main  z-999 w-full bg-white dark:bg-[#272829] rounded-bl-[20px] rounded-br-[20px]  h-[75px]  !mb-[14px] p-[15px]"}),r.jsx("div",{className:"container_main",children:r.jsx(_e,{darkmode:n,guarantee:!1})}),r.jsxs("div",{className:"flex  mt-[5px] gap-1 items-center mx-[10px]",children:[r.jsx("div",{className:"w-full",children:r.jsx(ue,{height:50,style:{borderRadius:"8px",width:"100%"},baseColor:n?"#36393E":"#DADADA"})}),r.jsx("div",{className:"w-full",children:r.jsx(ue,{height:50,style:{borderRadius:"8px",width:"100%"},baseColor:n?"#36393E":"#DADADA"})}),r.jsx("div",{className:"w-full",children:r.jsx(ue,{height:50,style:{borderRadius:"8px",width:"100%"},baseColor:n?"#36393E":"#DADADA"})})]}),r.jsx("div",{className:"mx-[10px]  mt-[12px]",children:r.jsx("div",{className:"container_main w-full !px-0 ",children:r.jsxs(Ce,{to:"https://t.me/Prestigeagent_bot",target:"blank",className:"bg-white dark:bg-[#272829] cursor-pointer  flex gap-[15px] items-center px-[15px] py-[18px] rounded-xl w-full",children:[r.jsx("img",{src:"/images/chatgpt-user.svg",alt:"",className:"w-14 h-14"}),r.jsxs("div",{className:"flex flex-col justify-between gap-1",children:[r.jsx("div",{className:"text-[#141414] text-[15px] dark:text-white font-medium leading-[18.47px]  ",children:c("home.trevel_managers_1")}),r.jsxs("div",{className:"text-sm leading-[18.47px] font-semibold dark:text-[#00AA6C] text-[#00AA6C] flex items-center gap-[5px]",children:[r.jsx(Te,{})," ",c("home.trevel_managers_2")]})," "]})]})})}),r.jsx("div",{className:"mb-[15px] mt-[5px] mx-[10px] gap-[15px] flex flex-col",children:[...Array(3)].map((y,E)=>r.jsx(ue,{height:300,style:{borderRadius:"8px"},baseColor:n?"#36393E":"#DADADA"},E))})]}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"pt-[75px] flex flex-col gap-3",children:[r.jsx(Ue,{widgetId:((G=m==null?void 0:m.town_names)==null?void 0:G[0])==="Фукуок"?"vcD1qbpHzwIKPr7L":((ne=m==null?void 0:m.town_names)==null?void 0:ne[0])==="Китайские Гавайи - Хайнань ( Китай )"?"bXVAxiJkj6x1fdws":((ae=m==null?void 0:m.town_names)==null?void 0:ae[0])==="Шарм эль Шейх"?"HFPX5xD7UjHFiRLb":Number(m==null?void 0:m.tour_somo_id)===248?"4WXrqVI8RvFJ5HVG":i==null?void 0:i.widget}),r.jsx("div",{className:"container_main ",children:r.jsx(_e,{darkmode:n,guarantee:!1})}),r.jsxs("div",{className:"flex gap-1 items-center mx-[10px]",children:[r.jsx(je,{placeholder:c("home.filters"),title:c("home.filters"),onClick:()=>d(!0),darkmode:n,icon:r.jsx("img",{src:"/images/union.svg",alt:""})}),r.jsx(je,{placeholder:"Сортировка",title:"Сортировка",onClick:()=>O(!0),darkmode:n,icon:V==="cheapest"?r.jsx("img",{src:"/images/huge-icon-2.svg",alt:""}):V==="recommended"?r.jsx("img",{src:"/images/huge-icon.svg",alt:""}):V==="expensive"?r.jsx("img",{src:"/images/huge-icon-3.svg",alt:""}):r.jsx("img",{src:"/images/huge-icon-4.svg",alt:""})}),r.jsxs("button",{onClick:()=>{b(!0)},className:"bg-[#0077FF]  w-full text-sm text-white flex justify-center items-center whitespace-nowrap rounded-lg px-4 py-[18px] h-[50px] gap-1",children:[r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M1.33325 3.33325L5.99992 1.33325L9.99992 3.33325L14.2019 1.53239C14.3712 1.45987 14.5671 1.53825 14.6397 1.70746C14.6574 1.74895 14.6666 1.79363 14.6666 1.83877V12.6666L9.99992 14.6666L5.99992 12.6666L1.79789 14.4675C1.62868 14.54 1.43273 14.4616 1.36021 14.2924C1.34242 14.2509 1.33325 14.2062 1.33325 14.1611V3.33325ZM9.99992 13.1759V4.78388L9.95672 4.80238L5.99992 2.82397V11.216L6.04309 11.1975L9.99992 13.1759Z",fill:"white"})}),c("home.on_the_map")]})]}),r.jsx("div",{className:"mx-[10px]",children:r.jsx("div",{className:"container_main w-full !px-0 ",children:r.jsxs(Ce,{to:"tel:+998781138333",target:"blank",className:"bg-white dark:bg-[#272829] cursor-pointer  flex gap-[15px] items-center px-[15px] py-[18px] rounded-xl w-full",children:[r.jsx("img",{src:"/images/chatgpt-user.svg",alt:"",className:"w-14 h-14"}),r.jsxs("div",{className:"flex flex-col gap-1 justify-between",children:[r.jsx("div",{className:"text-[#141414] text-[15px] dark:text-white font-medium leading-[18.47px]",children:c("home.trevel_managers_1")}),r.jsxs("div",{className:"text-sm leading-[18.47px] font-semibold dark:text-[#00AA6C] text-[#00AA6C] flex items-center gap-[5px]",children:[r.jsx(Te,{})," ",c("home.trevel_managers_2")]})]})]})})}),(m==null?void 0:m.tour_somo_id)===194?r.jsx(tt,{darkmode:n,selectedRegions:j,setSelectedRegions:P}):null,(z==null?void 0:z.length)>0?r.jsx("div",{className:"mx-[10px]",children:r.jsx("div",{className:"flex gap-2",children:z==null?void 0:z.map((y,E)=>r.jsx(Ye,{index:E,label:y,onRemove:()=>{q(y)}}))})}):null,r.jsx(Ze,{dataLength:u.length,next:()=>W(void 0),hasMore:T,className:"flex flex-col gap-[15px] mx-[10px]",loader:r.jsx("span",{className:"flex justify-center mt-[15px] h-[50px] "}),endMessage:r.jsx("p",{className:"mb-0"}),children:(ie=u==null?void 0:u.filter(y=>{var H;const E=R.length===0||y.hotel.tags.some(se=>R.includes(se.id)),S=z.length===0||z.includes(+((H=y==null?void 0:y.hotel)==null?void 0:H.star_alt)),X=(y==null?void 0:y.converted_price_number)>=te&&(y==null?void 0:y.converted_price_number)<=re,Q=j.length===0||j.includes(y==null?void 0:y.town_name);return E&&S&&X&&Q}))==null?void 0:ie.map((y,E)=>r.jsx($e,{item:y,index:E,darkmode:n}))}),r.jsx("div",{className:"flex  justify-center mb-3",children:g?r.jsx(Qe,{size:24,color:n?"white":"black"}):null})]})})]}),r.jsx(Ve,{setEditModal:Z,editModal:J,setObjError:_,darkmode:n,setAnotherObj:M,setObj:h,obj:i,objError:k,handleFind:K}),r.jsx(ut,{setModal:O,setItems:p,selectedSort:V,setSelectedSort:o,modal:I,list:[{name:"Рекомендуемые",value:"recommended",icon:"huge-icon.svg"},{name:"Самые дешевые",value:"cheapest",icon:"huge-icon-2.svg"},{name:"Самые дорогие",value:"expensive",icon:"huge-icon-3.svg"},{name:"Лучший рейтинг и низкая цена",value:"best-rating-low-price",icon:"huge-icon-4.svg"}]}),r.jsx(dt,{setPage:F,modal:l,setModal:d,filter_option:i==null?void 0:i.filters}),B&&r.jsx("div",{className:"fixed z-9999 inset-0 bg-gray-500 bg-opacity-50 flex items-center justify-center",children:r.jsx(nt,{items:C,loading:U,isError:L,darkmode:n,close:()=>{b(!1)},modalMap:B,setModalMap:b})})]})})};export{xt as default};
