import{b as R,u as X,c as b,r as i,j as e,e as de,P as ie,i as H,A as z,M as O,C as ee,t as I,k as xe,m as ue,S as L,l as he}from"./index-DXhfvoum.js";import{I as fe}from"./index.es-wgDY8xKq.js";import{L as ge,T as ve}from"./Lightgallery.es5-Bz9ZSmkI.js";/* empty css                     */import{F as Q}from"./FilterPill-BI3c_jmS.js";const we=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{clipPath:"url(#clip0_5385_14284)",children:[e.jsx("path",{d:"M2.50033 0.823334C2.04009 0.823334 1.66699 1.19643 1.66699 1.65667V6.65667C1.66699 9.13416 3.4689 11.1908 5.83366 11.5875V18.3233C5.83366 18.7836 6.20676 19.1567 6.66699 19.1567C7.12723 19.1567 7.50033 18.7836 7.50033 18.3233V11.5875C9.86509 11.1908 11.667 9.13416 11.667 6.65667V1.65667C11.667 1.19643 11.2939 0.823334 10.8337 0.823334C10.3734 0.823334 10.0003 1.19643 10.0003 1.65667V7.07333C10.0003 7.76369 9.44068 8.32333 8.75033 8.32333C8.05997 8.32333 7.50033 7.76369 7.50033 7.07333V1.65667C7.50033 1.19643 7.12723 0.823334 6.66699 0.823334C6.20676 0.823334 5.83366 1.19643 5.83366 1.65667V7.07333C5.83366 7.76369 5.27402 8.32333 4.58366 8.32333C3.8933 8.32333 3.33366 7.76369 3.33366 7.07333V1.65667C3.33366 1.19643 2.96056 0.823334 2.50033 0.823334Z",fill:"#235DFF"}),e.jsx("path",{d:"M18.3337 0.823334C15.5722 0.823334 13.3337 3.06191 13.3337 5.82333V11.6567H16.667V18.3233C16.667 18.7836 17.0401 19.1567 17.5003 19.1567C17.9606 19.1567 18.3337 18.7836 18.3337 18.3233V0.823334Z",fill:"#235DFF"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_5385_14284",children:e.jsx("rect",{width:"20",height:"20",fill:"white",transform:"translate(0 -0.0100098)"})})})]}),pe=({index:r,room:f,items:x,darkmode:l})=>{const{t:N}=R(),S=X(),_=b(),[m,y]=i.useState(!1),[w,g]=i.useState(0),C=s=>{y(!0),z().post("api/v1/somo-travel/service/store-price",{...s,tour_operator_id:_==null?void 0:_.tour_operator_id}).then(c=>{var u;S(`/hotels/detail/hoteltourbooking/${(u=c==null?void 0:c.data)==null?void 0:u.price_id}`+window.location.search)}).finally(()=>{y(!1)})};return e.jsxs("div",{className:"mb-4 p-4  rounded-lg bg-[#FFFFFF]  dark:bg-[#272829] flex flex-col gap-[20px]",children:[e.jsxs("h2",{className:"text-xl text-center font-medium text-[#141414] dark:text-white",children:[" ",f]}),e.jsx("ul",{className:"list-disc flex flex-col gap-[20px]",children:x.map((s,c)=>{var u,P,A,j,M;return e.jsxs("div",{className:"flex flex-col gap-[20px]",children:[c!==0?e.jsx("div",{className:"   w-full",children:e.jsx("img",{src:"/images/linedashed.svg",className:"w-full object-cover h-[0.5px] ",alt:""})}):null,((u=s==null?void 0:s.room_photos)==null?void 0:u.length)>0&&c===0?e.jsx("div",{className:"container_main !pr-0 !pl-0 w-full max-w-full overflow-hidden !my-[10px]",children:e.jsx("div",{className:"overflow-x-scroll whitespace-nowrap",children:e.jsx(ge,{plugins:[ve],elementClassNames:"inline-flex gap-[8px]",children:(P=s==null?void 0:s.room_photos)==null?void 0:P.map((p,V)=>e.jsx("a",{href:p==null?void 0:p.image_url,className:"w-[156px] h-[100px] rounded-[8px] overflow-hidden",children:e.jsx(de,{src:p==null?void 0:p.image_url,className:"w-full h-full object-cover",alt:""})},V))})})}):null,e.jsxs("p",{className:"text-[#141414] dark:text-white font-medium flex items-center gap-2",children:[e.jsx(we,{}),s==null?void 0:s.meal]}),e.jsxs("div",{className:"p-[10px] bg-[#EBF0F5] dark:bg-[#141414] px-[15px] rounded-lg  items-center flex gap-3 justify-between w-full relative",children:[e.jsxs("div",{className:"flex flex-col items-start gap-1",children:[e.jsx(e.Fragment,{children:((A=s==null?void 0:s.convertedPriceOld)==null?void 0:A.length)<=0||(s==null?void 0:s.convertedPriceOld)===null||(s==null?void 0:s.convertedPriceOld)===void 0?null:e.jsx("span",{className:"bg-[#FF8800] text-white  font-medium rounded-[20px] px-3",children:"10%"})}),e.jsxs("div",{className:" dark:text-white",children:[e.jsxs("div",{className:" md:text-lg font-medium",children:[s==null?void 0:s.nights," ",N("home.nights")]}),e.jsxs("p",{className:" text-sm md:text-base font-normal",children:[(s==null?void 0:s.adult)+(s==null?void 0:s.child)," ",N("home.turist")," , 1 ",N("home.number2")]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 ",children:[((j=s==null?void 0:s.convertedPriceOld)==null?void 0:j.length)<=0||(s==null?void 0:s.convertedPriceOld)===null||(s==null?void 0:s.convertedPriceOld)===void 0?null:e.jsx("span",{className:"dark:text-white  line-through",children:s==null?void 0:s.convertedPriceOld}),e.jsxs("button",{onClick:()=>{C(s),g(s==null?void 0:s.id)},className:`flex items-center gap-2 ${((M=s==null?void 0:s.convertedPriceOld)==null?void 0:M.length)<=0||(s==null?void 0:s.convertedPriceOld)===null||(s==null?void 0:s.convertedPriceOld)===void 0?"bg-[#235DFF]":"bg-[#FF8800]"}  px-[10px] py-2 rounded-lg`,children:[e.jsx("p",{className:"font-medium md:text-xl    text-white",children:m&&w===(s==null?void 0:s.id)?"loading...":e.jsxs(e.Fragment,{children:[ie(s==null?void 0:s.convertedPriceNumber)," ",N("home.uzs")]})}),e.jsx(H,{fill:"#fff"})]})]})]})]},c)})})]},r)},Ne=({modal:r,setModal:f,list:x,obj:l,setObj:N,fetchData:S,darkmode:_,setPage:m})=>{const{t:y}=R(),[w,g]=i.useState([]),C=c=>{w.includes(c)?g(w.filter(u=>u!==c)):g([...w,c])},s=()=>{f(!1),N({...l,nutrition:w}),m(1)};return i.useEffect(()=>{l!=null&&l.nutrition&&g(l.nutrition)},[l==null?void 0:l.nutrition]),e.jsx("div",{className:"w-full",children:e.jsx(O,{close:()=>f(!1),modal:r,heightModal:"min-h-[20vh] max-h-[80vh]",btnShow:!1,translateY:"translate-y-[80vh]",content:e.jsxs("div",{className:"w-full ",children:[e.jsxs("div",{className:"flex items-center justify-between w-full gap-3",children:[e.jsx("p",{className:"font-medium text-xl dark:text-white",children:y("home.nutrition2")}),e.jsx(ee,{fill:_?"#fff":"#141414",className:"cursor-pointer",onClick:()=>f(!1)})]}),e.jsx("div",{className:"mt-[20px] flex flex-col gap-3   pb-20",children:x==null?void 0:x.map((c,u)=>e.jsx("div",{className:"flex items-center justify-between gap-3 px-3  bg-white rounded-xl dark:bg-[#272829] dark:border-[#4B4B59] py-[15px] last:border-none cursor-pointer",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"checkbox",checked:w.includes(c==null?void 0:c.key),onChange:()=>C(c==null?void 0:c.key),className:"cursor-pointer w-4"}),e.jsx("p",{className:"dark:text-white",children:c==null?void 0:c.name})]})},u))}),e.jsx("div",{className:"dark:bg-[#141414] bg-white left-0 right-0    container_main w-full !px-0   fixed  bottom-0",children:e.jsx("button",{onClick:s,className:"mt-4 mb-5 w-[calc(100%-30px)] ml-[15px] py-2 bg-[#1C4ACC] text-white rounded-[12px]",children:y("home.save")})})]})})})},_e=({modal:r,setModal:f,list:x,obj:l,setObj:N,fetchData:S,setPage:_,darkmode:m})=>{const{t:y}=R(),w=()=>{f(!1)};return e.jsx("div",{className:"w-full",children:e.jsx(O,{close:()=>f(!1),modal:r,heightModal:"min-h-[20vh] max-h-[80vh]",btnShow:!1,translateY:"translate-y-[80vh]",content:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between w-full gap-3",children:[e.jsx("p",{className:"font-medium text-xl dark:text-white",children:y("home.number")}),e.jsx(ee,{fill:m?"#fff":"#141414",className:"cursor-pointer",onClick:()=>f(!1)})]}),e.jsx("div",{className:"mt-[20px] flex flex-col gap-3 pb-5",children:x==null?void 0:x.map((g,C)=>e.jsxs("div",{onClick:()=>{w(),_(1),N({...l,room_key:g==null?void 0:g.key})},className:"flex items-center justify-between gap-3 px-3   rounded-xl  bg-white dark:bg-[#272829] py-[15px] last:border-none cursor-pointer",children:[e.jsx("p",{className:" dark:text-white truncate",children:g==null?void 0:g.name}),e.jsx(H,{fill:m?"#B3B7CE":"#141414"})]},C))})]})})})},W=r=>e.jsxs("div",{...r,className:"flex gap-2 w-full cursor-pointer relative  px-[15px] py-[10px] rounded-[8px] duration-200 bg-[#FFFFFF]  dark:bg-[#272829] text-center justify-center items-center h-[46px]",children:[e.jsx("span",{className:"select-none dark:text-white",children:r!=null&&r.placeholder&&(r==null?void 0:r.value)===""?r==null?void 0:r.placeholder:r==null?void 0:r.title}),e.jsx(H,{fill:r!=null&&r.darkmode?"#fff":"#042B50",className:"select-none w-[6.5] h-[12px] rotate-90 mt-1 dark:text-white"})]}),Se=({darkmode:r})=>{var Y,Z,G,q,J;const f=X(),{t:x}=R(),l=b(),[N,S]=i.useState(!1),[_,m]=i.useState(!1),[y,w]=i.useState(!1),[g,C]=i.useState(!1),[s,c]=i.useState(""),[u,P]=i.useState([]),[A,j]=i.useState(!0),[M,p]=i.useState(1),[V,T]=i.useState(!1),[$,le]=i.useState([]),[B,se]=i.useState([]),[n,D]=i.useState({adultCounter:2,childrenCount:0,nutrition:[]}),[ne,U]=i.useState({}),[d,K]=i.useState({town_from_inc:void 0,tour_operator_id:void 0,state_id:void 0,hotel_key:void 0});i.useEffect(()=>{let t=window.location.search;t&&(E(t),c(t),te(t))},[]),i.useEffect(()=>{l!=null&&l.town_from_inc&&(l!=null&&l.tour_operator_id)&&K(t=>({...t,town_from_inc:l==null?void 0:l.town_from_inc,tour_operator_id:l==null?void 0:l.tour_operator_id,state_id:l==null?void 0:l.state_id,hotel_key:l==null?void 0:l.hotel_key,towns:+(l==null?void 0:l.towns),tour_somo_id:l==null?void 0:l.tour_somo_id})),(l!=null&&l.adult||l!=null&&l.childs)&&D(t=>({...t,number_of_days:l==null?void 0:l.nights,number_of_tourists:Number((l==null?void 0:l.adult)===void 0?2:l==null?void 0:l.adult)+Number((l==null?void 0:l.childs)===void 0?0:l==null?void 0:l.childs),childrenCount:Number((l==null?void 0:l.childs)===void 0?0:l==null?void 0:l.childs),adultCounter:Number((l==null?void 0:l.adult)===void 0?1:l==null?void 0:l.adult)})),window.scrollTo({top:0,behavior:"smooth"})},[]);const E=(t,a)=>{C(!0),t&&(w(!0),I("hotel_room_serch_change")),z().get(`/api/v1/somo-travel/tour-prices-room${t===void 0?s:t}&page=${+a?+a:M}&per_page=3`).then(o=>{var k,v;let h=(v=(k=o==null?void 0:o.data)==null?void 0:k.data)==null?void 0:v.prices;P(t?h:F=>[...F,...h]),p(F=>F+1),(h==null?void 0:h.length)===0?j(!1):j(!0)}).catch(o=>{console.log(o)}).finally(()=>{C(!1),t&&w(!1)})},te=t=>{z().get(`api/v1/somo-travel/tour-filters-room${t===void 0?s:t}`).then(a=>{var h;const o=(h=a==null?void 0:a.data)==null?void 0:h.data;se(o==null?void 0:o.rooms),le(o==null?void 0:o.meals)}).catch(a=>{console.log(a)})},re=()=>{let t=!0,a={};if(n!=null&&n.departure_date||(t=!1,a={...a,departure_date:!0}),n!=null&&n.number_of_tourists||(t=!1,a={...a,number_of_tourists:!0}),n!=null&&n.number_of_days||(t=!1,a={...a,number_of_days:!0}),t){const o={town_from_inc:d==null?void 0:d.town_from_inc,tour_operator_id:d==null?void 0:d.tour_operator_id,state_id:d==null?void 0:d.state_id,checkin:n==null?void 0:n.departure_date,nights:n==null?void 0:n.number_of_days,adult:n==null?void 0:n.adultCounter,childs:n==null?void 0:n.childrenCount,hotel_key:d==null?void 0:d.hotel_key,tour_somo_id:d==null?void 0:d.tour_somo_id,towns:d!=null&&d.towns?[d==null?void 0:d.towns]:[],catclaim:l==null?void 0:l.catclaim},h=v=>{const[F,oe,ce]=v.split("-");return`${F}${oe}${ce}`},k=Object.keys(o).map(v=>Array.isArray(o[v])?o[v].map(F=>`${v}[]=${encodeURIComponent(F)}`).join("&"):v==="checkin"?`${v}=${encodeURIComponent(h(o[v]))}`:`${v}=${encodeURIComponent(o[v])}`).join("&");f(`/hotels/detail/hotelselectingnumber/?${k}`),E("?"+k,1),T(!1),p(0)}else U(a),window.scrollTo({top:0,behavior:"smooth"})},ae=(Z=(Y=u==null?void 0:u.filter(t=>+(t==null?void 0:t.roomKey)==+(n==null?void 0:n.room_key)||!(n!=null&&n.room_key)))==null?void 0:Y.filter(t=>{var a,o;return((a=n==null?void 0:n.nutrition)==null?void 0:a.length)>0?(o=n==null?void 0:n.nutrition)==null?void 0:o.includes(t==null?void 0:t.mealKey):!0}))==null?void 0:Z.reduce((t,a)=>(t[a.room]||(t[a.room]=[]),t[a.room].push(a),t),{});return e.jsxs("div",{className:`min-h-screen  pb-[15px] ${r?"bg-[#141414]":"bg-[#EBF0F5]"}`,children:[e.jsx("div",{className:"container_main !px-0",children:e.jsx("swection",{className:`py-[20px]  fixed container_main z-20 w-full  ${r?"bg-[#272829]":"bg-white"}`,children:e.jsxs("div",{className:"flex items-center w-full gap-4 ",children:[e.jsx(xe,{color:r?"#fff":"#141414",onClick:()=>f(-1),className:" cursor-pointer"}),e.jsx("div",{className:"bg-[#235DFF26] h-[55px] flex justify-center w-full rounded-[8px] px-[15px] py-[10px]    items-center",children:e.jsxs("div",{className:"text-[#141414]  dark:text-white",children:[new Date(n==null?void 0:n.departure_date).getDate()+" "," ",ue[new Date(n==null?void 0:n.departure_date).getMonth()],", ",l==null?void 0:l.nights," ",x("home.nights"),","," ",+(n==null?void 0:n.number_of_tourists)," ",x("home.turist")]})}),e.jsx("img",{onClick:()=>{T(!0)},src:"/images/edit.svg",alt:"",className:" cursor-pointer mr-3"})]})})}),e.jsx("div",{className:"container_main !px-0",children:y?e.jsxs("div",{children:[e.jsx("div",{className:"pt-[95px] bg-[#EBF0F5] dark:bg-[#141414] ",children:e.jsx("div",{className:"overflow-x-scroll  w-full  ",children:e.jsxs("div",{className:"inline-flex items-center whitespace-nowrap gap-2 px-[15px] my-[10px] w-full",children:[e.jsx("div",{className:"w-full",children:e.jsx(L,{height:50,style:{borderRadius:"8px"},baseColor:r?"#36393E":"#DADADA"})}),e.jsx("div",{className:"w-full",children:e.jsx(L,{height:50,style:{borderRadius:"8px"},baseColor:r?"#36393E":"#DADADA"})})]})})}),e.jsx("div",{className:"flex flex-col gap-[15px]",children:[...Array(3)].map((t,a)=>e.jsx("div",{className:"w-full",children:e.jsx(L,{height:200,style:{borderRadius:"15px"},baseColor:r?"#36393E":"#DADADA"})},a))})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pt-[95px] bg-[#EBF0F5] dark:bg-[#141414]  ",children:[e.jsx("div",{className:"overflow-x-scroll  w-full ",children:e.jsxs("div",{className:"inline-flex items-center whitespace-nowrap gap-2 px-[15px] my-[15px] w-full",children:[e.jsx(W,{darkmode:r,placeholder:x("home.number"),title:x("home.number"),onClick:()=>{I("hotel_room_filtr"),S(!0)}}),e.jsx(W,{darkmode:r,placeholder:x("home.nutrition2"),title:x("home.nutrition2"),onClick:()=>{I("hotel_room_nutr"),m(!0)}})]})}),((G=n==null?void 0:n.nutrition)==null?void 0:G.length)>0||n!=null&&n.room_key?e.jsx("div",{className:"mx-[15px] mb-3 ",children:e.jsxs("div",{className:"flex gap-2 overflow-x-scroll",children:[(q=n==null?void 0:n.nutrition)==null?void 0:q.map((t,a)=>{var o;return e.jsx(Q,{index:a,label:(o=$==null?void 0:$.find(h=>(h==null?void 0:h.key)===t))==null?void 0:o.name,onRemove:()=>{D(h=>({...h,nutrition:h.nutrition.filter(k=>k!==t)}))}})}),n!=null&&n.room_key?e.jsx(Q,{label:(J=B==null?void 0:B.find(t=>(t==null?void 0:t.key)===(n==null?void 0:n.room_key)))==null?void 0:J.name,onRemove:()=>{D(t=>{const a={...t};return delete a.room_key,a})}}):null]})}):null]}),e.jsx("div",{className:"flex flex-col pb-3  min-h-[85vh] rounded-[15px]",children:(u==null?void 0:u.length)>0?e.jsx(fe,{dataLength:u.length,next:()=>E(void 0),hasMore:A,endMessage:e.jsx("p",{className:"mb-0"}),children:Object.entries(ae).map(([t,a],o)=>e.jsx(pe,{index:o,room:t,items:a,darkmode:r}))}):e.jsxs("div",{className:"container_main  relative flex  justify-center items-center w-full flex-col gap-[35px] p-6 ",children:[I("err_tour_number"),e.jsx("div",{children:e.jsx("img",{src:"/images/soon-towns.svg",alt:"",className:"h-[144px]"})}),e.jsxs("div",{className:"flex flex-col gap-[10px] text-center text-[#141414] text-lg",children:[e.jsx("h4",{className:" font-semibold dark:text-white",children:x("home.tourSoldOut")}),e.jsx("p",{className:"font-medium dark:text-white text-lg leading-[20px]",children:x("home.sorryNoSeatsButOtherOffers")})]}),e.jsx("button",{onClick:()=>{f("/")},className:"cursor-pointer text-base bg-[#235DFF] rounded-xl p-4 w-full text-center text-white",children:x("home.backToSearch")})]})})]})}),e.jsx(he,{setEditModal:T,editModal:V,setObjError:U,darkmode:r,setAnotherObj:K,setObj:D,obj:n,objError:ne,handleFind:re}),e.jsx(_e,{fetchData:E,setModal:S,modal:N,darkmode:r,list:B,setObj:D,obj:n,setPage:p}),e.jsx(Ne,{fetchData:E,setModal:m,modal:_,darkmode:r,list:$,setObj:D,obj:n,setPage:p})]})};export{Se as default};
