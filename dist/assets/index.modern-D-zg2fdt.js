import{a as at,R as k,J as ue,K as dt,r as Se,N as y}from"./index-DXhfvoum.js";var mt=Object.getOwnPropertyNames,gt=Object.getOwnPropertySymbols,_t=Object.prototype.hasOwnProperty;function De(r,t){return function(o,e,s){return r(o,e,s)&&t(o,e,s)}}function te(r){return function(n,o,e){if(!n||!o||typeof n!="object"||typeof o!="object")return r(n,o,e);var s=e.cache,i=s.get(n),u=s.get(o);if(i&&u)return i===o&&u===n;s.set(n,o),s.set(o,n);var a=r(n,o,e);return s.delete(n),s.delete(o),a}}function Ie(r){return mt(r).concat(gt(r))}var vt=Object.hasOwn||function(r,t){return _t.call(r,t)};function B(r,t){return r===t||!r&&!t&&r!==r&&t!==t}var yt="__v",wt="__o",Ct="_owner",ze=Object.getOwnPropertyDescriptor,je=Object.keys;function Mt(r,t,n){var o=r.length;if(t.length!==o)return!1;for(;o-- >0;)if(!n.equals(r[o],t[o],o,o,r,t,n))return!1;return!0}function Et(r,t){return B(r.getTime(),t.getTime())}function bt(r,t){return r.name===t.name&&r.message===t.message&&r.cause===t.cause&&r.stack===t.stack}function Lt(r,t){return r===t}function Ne(r,t,n){var o=r.size;if(o!==t.size)return!1;if(!o)return!0;for(var e=new Array(o),s=r.entries(),i,u,a=0;(i=s.next())&&!i.done;){for(var c=t.entries(),h=!1,l=0;(u=c.next())&&!u.done;){if(e[l]){l++;continue}var m=i.value,d=u.value;if(n.equals(m[0],d[0],a,l,r,t,n)&&n.equals(m[1],d[1],m[0],d[0],r,t,n)){h=e[l]=!0;break}l++}if(!h)return!1;a++}return!0}var xt=B;function kt(r,t,n){var o=je(r),e=o.length;if(je(t).length!==e)return!1;for(;e-- >0;)if(!ut(r,t,n,o[e]))return!1;return!0}function $(r,t,n){var o=Ie(r),e=o.length;if(Ie(t).length!==e)return!1;for(var s,i,u;e-- >0;)if(s=o[e],!ut(r,t,n,s)||(i=ze(r,s),u=ze(t,s),(i||u)&&(!i||!u||i.configurable!==u.configurable||i.enumerable!==u.enumerable||i.writable!==u.writable)))return!1;return!0}function Ot(r,t){return B(r.valueOf(),t.valueOf())}function At(r,t){return r.source===t.source&&r.flags===t.flags}function qe(r,t,n){var o=r.size;if(o!==t.size)return!1;if(!o)return!0;for(var e=new Array(o),s=r.values(),i,u;(i=s.next())&&!i.done;){for(var a=t.values(),c=!1,h=0;(u=a.next())&&!u.done;){if(!e[h]&&n.equals(i.value,u.value,i.value,u.value,r,t,n)){c=e[h]=!0;break}h++}if(!c)return!1}return!0}function St(r,t){var n=r.length;if(t.length!==n)return!1;for(;n-- >0;)if(r[n]!==t[n])return!1;return!0}function Tt(r,t){return r.hostname===t.hostname&&r.pathname===t.pathname&&r.protocol===t.protocol&&r.port===t.port&&r.hash===t.hash&&r.username===t.username&&r.password===t.password}function ut(r,t,n,o){return(o===Ct||o===wt||o===yt)&&(r.$$typeof||t.$$typeof)?!0:vt(t,o)&&n.equals(r[o],t[o],o,o,r,t,n)}var Pt="[object Arguments]",Dt="[object Boolean]",It="[object Date]",zt="[object Error]",jt="[object Map]",Nt="[object Number]",qt="[object Object]",Rt="[object RegExp]",Zt="[object Set]",Ut="[object String]",Ft="[object URL]",Bt=Array.isArray,Re=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ze=Object.assign,Gt=Object.prototype.toString.call.bind(Object.prototype.toString);function Ht(r){var t=r.areArraysEqual,n=r.areDatesEqual,o=r.areErrorsEqual,e=r.areFunctionsEqual,s=r.areMapsEqual,i=r.areNumbersEqual,u=r.areObjectsEqual,a=r.arePrimitiveWrappersEqual,c=r.areRegExpsEqual,h=r.areSetsEqual,l=r.areTypedArraysEqual,m=r.areUrlsEqual;return function(p,_,f){if(p===_)return!0;if(p==null||_==null)return!1;var w=typeof p;if(w!==typeof _)return!1;if(w!=="object")return w==="number"?i(p,_,f):w==="function"?e(p,_,f):!1;var C=p.constructor;if(C!==_.constructor)return!1;if(C===Object)return u(p,_,f);if(Bt(p))return t(p,_,f);if(Re!=null&&Re(p))return l(p,_,f);if(C===Date)return n(p,_,f);if(C===RegExp)return c(p,_,f);if(C===Map)return s(p,_,f);if(C===Set)return h(p,_,f);var g=Gt(p);return g===It?n(p,_,f):g===Rt?c(p,_,f):g===jt?s(p,_,f):g===Zt?h(p,_,f):g===qt?typeof p.then!="function"&&typeof _.then!="function"&&u(p,_,f):g===Ft?m(p,_,f):g===zt?o(p,_,f):g===Pt?u(p,_,f):g===Dt||g===Nt||g===Ut?a(p,_,f):!1}}function Kt(r){var t=r.circular,n=r.createCustomConfig,o=r.strict,e={areArraysEqual:o?$:Mt,areDatesEqual:Et,areErrorsEqual:bt,areFunctionsEqual:Lt,areMapsEqual:o?De(Ne,$):Ne,areNumbersEqual:xt,areObjectsEqual:o?$:kt,arePrimitiveWrappersEqual:Ot,areRegExpsEqual:At,areSetsEqual:o?De(qe,$):qe,areTypedArraysEqual:o?$:St,areUrlsEqual:Tt};if(n&&(e=Ze({},e,n(e))),t){var s=te(e.areArraysEqual),i=te(e.areMapsEqual),u=te(e.areObjectsEqual),a=te(e.areSetsEqual);e=Ze({},e,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:u,areSetsEqual:a})}return e}function $t(r){return function(t,n,o,e,s,i,u){return r(t,n,u)}}function Wt(r){var t=r.circular,n=r.comparator,o=r.createState,e=r.equals,s=r.strict;if(o)return function(a,c){var h=o(),l=h.cache,m=l===void 0?t?new WeakMap:void 0:l,d=h.meta;return n(a,c,{cache:m,equals:e,meta:d,strict:s})};if(t)return function(a,c){return n(a,c,{cache:new WeakMap,equals:e,meta:void 0,strict:s})};var i={cache:void 0,equals:e,meta:void 0,strict:s};return function(a,c){return n(a,c,i)}}var Ue=j();j({strict:!0});j({circular:!0});j({circular:!0,strict:!0});j({createInternalComparator:function(){return B}});j({strict:!0,createInternalComparator:function(){return B}});j({circular:!0,createInternalComparator:function(){return B}});j({circular:!0,createInternalComparator:function(){return B},strict:!0});function j(r){r===void 0&&(r={});var t=r.circular,n=t===void 0?!1:t,o=r.createInternalComparator,e=r.createState,s=r.strict,i=s===void 0?!1:s,u=Kt(r),a=Ht(u),c=o?o(a):$t(a);return Wt({circular:n,comparator:a,createState:e,equals:c,strict:i})}const Fe=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],he=1,W=8;class Te{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,o]=new Uint8Array(t,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const e=o>>4;if(e!==he)throw new Error(`Got v${e} data when expected v${he}.`);const s=Fe[o&15];if(!s)throw new Error("Unrecognized array type.");const[i]=new Uint16Array(t,2,1),[u]=new Uint32Array(t,4,1);return new Te(u,i,s,t)}constructor(t,n=64,o=Float64Array,e){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=o,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const s=Fe.indexOf(this.ArrayType),i=t*2*this.ArrayType.BYTES_PER_ELEMENT,u=t*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-u%8)%8;if(s<0)throw new Error(`Unexpected typed array class: ${o}.`);e&&e instanceof ArrayBuffer?(this.data=e,this.ids=new this.IndexArrayType(this.data,W,t),this.coords=new this.ArrayType(this.data,W+u+a,t*2),this._pos=t*2,this._finished=!0):(this.data=new ArrayBuffer(W+i+u+a),this.ids=new this.IndexArrayType(this.data,W,t),this.coords=new this.ArrayType(this.data,W+u+a,t*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(he<<4)+s]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}add(t,n){const o=this._pos>>1;return this.ids[o]=o,this.coords[this._pos++]=t,this.coords[this._pos++]=n,o}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Ce(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,n,o,e){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:s,coords:i,nodeSize:u}=this,a=[0,s.length-1,0],c=[];for(;a.length;){const h=a.pop()||0,l=a.pop()||0,m=a.pop()||0;if(l-m<=u){for(let f=m;f<=l;f++){const w=i[2*f],C=i[2*f+1];w>=t&&w<=o&&C>=n&&C<=e&&c.push(s[f])}continue}const d=m+l>>1,p=i[2*d],_=i[2*d+1];p>=t&&p<=o&&_>=n&&_<=e&&c.push(s[d]),(h===0?t<=p:n<=_)&&(a.push(m),a.push(d-1),a.push(1-h)),(h===0?o>=p:e>=_)&&(a.push(d+1),a.push(l),a.push(1-h))}return c}within(t,n,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:e,coords:s,nodeSize:i}=this,u=[0,e.length-1,0],a=[],c=o*o;for(;u.length;){const h=u.pop()||0,l=u.pop()||0,m=u.pop()||0;if(l-m<=i){for(let f=m;f<=l;f++)Be(s[2*f],s[2*f+1],t,n)<=c&&a.push(e[f]);continue}const d=m+l>>1,p=s[2*d],_=s[2*d+1];Be(p,_,t,n)<=c&&a.push(e[d]),(h===0?t-o<=p:n-o<=_)&&(u.push(m),u.push(d-1),u.push(1-h)),(h===0?t+o>=p:n+o>=_)&&(u.push(d+1),u.push(l),u.push(1-h))}return a}}function Ce(r,t,n,o,e,s){if(e-o<=n)return;const i=o+e>>1;lt(r,t,i,o,e,s),Ce(r,t,n,o,i-1,1-s),Ce(r,t,n,i+1,e,1-s)}function lt(r,t,n,o,e,s){for(;e>o;){if(e-o>600){const c=e-o+1,h=n-o+1,l=Math.log(c),m=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*m*(c-m)/c)*(h-c/2<0?-1:1),p=Math.max(o,Math.floor(n-h*m/c+d)),_=Math.min(e,Math.floor(n+(c-h)*m/c+d));lt(r,t,n,p,_,s)}const i=t[2*n+s];let u=o,a=e;for(V(r,t,o,n),t[2*e+s]>i&&V(r,t,o,e);u<a;){for(V(r,t,u,a),u++,a--;t[2*u+s]<i;)u++;for(;t[2*a+s]>i;)a--}t[2*o+s]===i?V(r,t,o,a):(a++,V(r,t,a,e)),a<=n&&(o=a+1),n<=a&&(e=a-1)}}function V(r,t,n,o){pe(r,n,o),pe(t,2*n,2*o),pe(t,2*n+1,2*o+1)}function pe(r,t,n){const o=r[t];r[t]=r[n],r[n]=o}function Be(r,t,n,o){const e=r-n,s=t-o;return e*e+s*s}const Vt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:r=>r},Ge=Math.fround||(r=>t=>(r[0]=+t,r[0]))(new Float32Array(1)),q=2,I=3,fe=4,D=5,ct=6;class Yt{constructor(t){this.options=Object.assign(Object.create(Vt),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:n,minZoom:o,maxZoom:e}=this.options;n&&console.time("total time");const s=`prepare ${t.length} points`;n&&console.time(s),this.points=t;const i=[];for(let a=0;a<t.length;a++){const c=t[a];if(!c.geometry)continue;const[h,l]=c.geometry.coordinates,m=Ge(re(h)),d=Ge(ne(l));i.push(m,d,1/0,a,-1,1),this.options.reduce&&i.push(0)}let u=this.trees[e+1]=this._createTree(i);n&&console.timeEnd(s);for(let a=e;a>=o;a--){const c=+Date.now();u=this.trees[a]=this._createTree(this._cluster(u,a)),n&&console.log("z%d: %d clusters in %dms",a,u.numItems,+Date.now()-c)}return n&&console.timeEnd("total time"),this}getClusters(t,n){let o=((t[0]+180)%360+360)%360-180;const e=Math.max(-90,Math.min(90,t[1]));let s=t[2]===180?180:((t[2]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)o=-180,s=180;else if(o>s){const l=this.getClusters([o,e,180,i],n),m=this.getClusters([-180,e,s,i],n);return l.concat(m)}const u=this.trees[this._limitZoom(n)],a=u.range(re(o),ne(i),re(s),ne(e)),c=u.data,h=[];for(const l of a){const m=this.stride*l;h.push(c[m+D]>1?He(c,m,this.clusterProps):this.points[c[m+I]])}return h}getChildren(t){const n=this._getOriginId(t),o=this._getOriginZoom(t),e="No cluster with the specified id.",s=this.trees[o];if(!s)throw new Error(e);const i=s.data;if(n*this.stride>=i.length)throw new Error(e);const u=this.options.radius/(this.options.extent*Math.pow(2,o-1)),a=i[n*this.stride],c=i[n*this.stride+1],h=s.within(a,c,u),l=[];for(const m of h){const d=m*this.stride;i[d+fe]===t&&l.push(i[d+D]>1?He(i,d,this.clusterProps):this.points[i[d+I]])}if(l.length===0)throw new Error(e);return l}getLeaves(t,n,o){n=n||10,o=o||0;const e=[];return this._appendLeaves(e,t,n,o,0),e}getTile(t,n,o){const e=this.trees[this._limitZoom(t)],s=Math.pow(2,t),{extent:i,radius:u}=this.options,a=u/i,c=(o-a)/s,h=(o+1+a)/s,l={features:[]};return this._addTileFeatures(e.range((n-a)/s,c,(n+1+a)/s,h),e.data,n,o,s,l),n===0&&this._addTileFeatures(e.range(1-a/s,c,1,h),e.data,s,o,s,l),n===s-1&&this._addTileFeatures(e.range(0,c,a/s,h),e.data,-1,o,s,l),l.features.length?l:null}getClusterExpansionZoom(t){let n=this._getOriginZoom(t)-1;for(;n<=this.options.maxZoom;){const o=this.getChildren(t);if(n++,o.length!==1)break;t=o[0].properties.cluster_id}return n}_appendLeaves(t,n,o,e,s){const i=this.getChildren(n);for(const u of i){const a=u.properties;if(a&&a.cluster?s+a.point_count<=e?s+=a.point_count:s=this._appendLeaves(t,a.cluster_id,o,e,s):s<e?s++:t.push(u),t.length===o)break}return s}_createTree(t){const n=new Te(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let o=0;o<t.length;o+=this.stride)n.add(t[o],t[o+1]);return n.finish(),n.data=t,n}_addTileFeatures(t,n,o,e,s,i){for(const u of t){const a=u*this.stride,c=n[a+D]>1;let h,l,m;if(c)h=ht(n,a,this.clusterProps),l=n[a],m=n[a+1];else{const _=this.points[n[a+I]];h=_.properties;const[f,w]=_.geometry.coordinates;l=re(f),m=ne(w)}const d={type:1,geometry:[[Math.round(this.options.extent*(l*s-o)),Math.round(this.options.extent*(m*s-e))]],tags:h};let p;c||this.options.generateId?p=n[a+I]:p=this.points[n[a+I]].id,p!==void 0&&(d.id=p),i.features.push(d)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,n){const{radius:o,extent:e,reduce:s,minPoints:i}=this.options,u=o/(e*Math.pow(2,n)),a=t.data,c=[],h=this.stride;for(let l=0;l<a.length;l+=h){if(a[l+q]<=n)continue;a[l+q]=n;const m=a[l],d=a[l+1],p=t.within(a[l],a[l+1],u),_=a[l+D];let f=_;for(const w of p){const C=w*h;a[C+q]>n&&(f+=a[C+D])}if(f>_&&f>=i){let w=m*_,C=d*_,g,A=-1;const L=((l/h|0)<<5)+(n+1)+this.points.length;for(const v of p){const S=v*h;if(a[S+q]<=n)continue;a[S+q]=n;const M=a[S+D];w+=a[S]*M,C+=a[S+1]*M,a[S+fe]=L,s&&(g||(g=this._map(a,l,!0),A=this.clusterProps.length,this.clusterProps.push(g)),s(g,this._map(a,S)))}a[l+fe]=L,c.push(w/f,C/f,1/0,L,-1,f),s&&c.push(A)}else{for(let w=0;w<h;w++)c.push(a[l+w]);if(f>1)for(const w of p){const C=w*h;if(!(a[C+q]<=n)){a[C+q]=n;for(let g=0;g<h;g++)c.push(a[C+g])}}}}return c}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,n,o){if(t[n+D]>1){const i=this.clusterProps[t[n+ct]];return o?Object.assign({},i):i}const e=this.points[t[n+I]].properties,s=this.options.map(e);return o&&s===e?Object.assign({},s):s}}function He(r,t,n){return{type:"Feature",id:r[t+I],properties:ht(r,t,n),geometry:{type:"Point",coordinates:[Jt(r[t]),Xt(r[t+1])]}}}function ht(r,t,n){const o=r[t+D],e=o>=1e4?`${Math.round(o/1e3)}k`:o>=1e3?`${Math.round(o/100)/10}k`:o,s=r[t+ct],i=s===-1?{}:Object.assign({},n[s]);return Object.assign(i,{cluster:!0,cluster_id:r[t+I],point_count:o,point_count_abbreviated:e})}function re(r){return r/360+.5}function ne(r){const t=Math.sin(r*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function Jt(r){return(r-.5)*360}function Xt(r){const t=(180-r*360)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function Qt(r,t){var n={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&t.indexOf(o)<0&&(n[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,o=Object.getOwnPropertySymbols(r);e<o.length;e++)t.indexOf(o[e])<0&&Object.prototype.propertyIsEnumerable.call(r,o[e])&&(n[o[e]]=r[o[e]]);return n}class x{static isAdvancedMarkerAvailable(t){return google.maps.marker&&t.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(t){return google.maps.marker&&t instanceof google.maps.marker.AdvancedMarkerElement}static setMap(t,n){this.isAdvancedMarker(t)?t.map=n:t.setMap(n)}static getPosition(t){if(this.isAdvancedMarker(t)){if(t.position){if(t.position instanceof google.maps.LatLng)return t.position;if(Number.isFinite(t.position.lat)&&Number.isFinite(t.position.lng))return new google.maps.LatLng(t.position.lat,t.position.lng)}return new google.maps.LatLng(null)}return t.getPosition()}static getVisible(t){return this.isAdvancedMarker(t)?!0:t.getVisible()}}class Me{constructor({markers:t,position:n}){this.markers=[],t&&(this.markers=t),n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(this.markers.length===0&&!this._position)return;const t=new google.maps.LatLngBounds(this._position,this._position);for(const n of this.markers)t.extend(x.getPosition(n));return t}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(t=>x.getVisible(t)).length}push(t){this.markers.push(t)}delete(){this.marker&&(x.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}function Ee(r,t="assertion failed"){if(r==null)throw Error(t)}class er{constructor({maxZoom:t=16}){this.maxZoom=t}noop({markers:t}){return tr(t)}}const tr=r=>r.map(n=>new Me({position:x.getPosition(n),markers:[n]}));class rr extends er{constructor(t){var{maxZoom:n,radius:o=60}=t,e=Qt(t,["maxZoom","radius"]);super({maxZoom:n}),this.markers=[],this.clusters=[],this.state={zoom:-1},this.superCluster=new Yt(Object.assign({maxZoom:this.maxZoom,radius:o},e))}calculate(t){let n=!1,o=t.map.getZoom();Ee(o),o=Math.round(o);const e={zoom:o};if(!Ue(t.markers,this.markers)){n=!0,this.markers=[...t.markers];const s=this.markers.map(i=>{const u=x.getPosition(i);return{type:"Feature",geometry:{type:"Point",coordinates:[u.lng(),u.lat()]},properties:{marker:i}}});this.superCluster.load(s)}return n||(this.state.zoom<=this.maxZoom||e.zoom<=this.maxZoom)&&(n=!Ue(this.state,e)),this.state=e,t.markers.length===0?(this.clusters=[],{clusters:this.clusters,changed:n}):(n&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:n})}cluster({map:t}){const n=t.getZoom();return Ee(n),this.superCluster.getClusters([-180,-90,180,90],Math.round(n)).map(o=>this.transformCluster(o))}transformCluster({geometry:{coordinates:[t,n]},properties:o}){if(o.cluster)return new Me({markers:this.superCluster.getLeaves(o.cluster_id,1/0).map(s=>s.properties.marker),position:{lat:n,lng:t}});const e=o.marker;return new Me({markers:[e],position:x.getPosition(e)})}}class nr{constructor(t,n){this.markers={sum:t.length};const o=n.map(s=>s.count),e=o.reduce((s,i)=>s+i,0);this.clusters={count:n.length,markers:{mean:e/n.length,sum:e,min:Math.min(...o),max:Math.max(...o)}}}}class or{render({count:t,position:n},o,e){const i=`<svg fill="${t>Math.max(10,o.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${t}</text>
</svg>`,u=`Cluster of ${t} markers`,a=Number(google.maps.Marker.MAX_ZINDEX)+t;if(x.isAdvancedMarkerAvailable(e)){const l=new DOMParser().parseFromString(i,"image/svg+xml").documentElement;l.setAttribute("transform","translate(0 25)");const m={map:e,position:n,zIndex:a,title:u,content:l};return new google.maps.marker.AdvancedMarkerElement(m)}const c={position:n,zIndex:a,title:u,icon:{url:`data:image/svg+xml;base64,${btoa(i)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(c)}}function ir(r,t){for(let n in t.prototype)r.prototype[n]=t.prototype[n]}class Pe{constructor(){ir(Pe,google.maps.OverlayView)}}var Z;(function(r){r.CLUSTERING_BEGIN="clusteringbegin",r.CLUSTERING_END="clusteringend",r.CLUSTER_CLICK="click",r.GMP_CLICK="gmp-click"})(Z||(Z={}));const sr=(r,t,n)=>{t.bounds&&n.fitBounds(t.bounds)};class zr extends Pe{constructor({map:t,markers:n=[],algorithmOptions:o={},algorithm:e=new rr(o),renderer:s=new or,onClusterClick:i=sr}){super(),this.map=null,this.idleListener=null,this.markers=[...n],this.clusters=[],this.algorithm=e,this.renderer=s,this.onClusterClick=i,t&&this.setMap(t)}addMarker(t,n){this.markers.includes(t)||(this.markers.push(t),n||this.render())}addMarkers(t,n){t.forEach(o=>{this.addMarker(o,!0)}),n||this.render()}removeMarker(t,n){const o=this.markers.indexOf(t);return o===-1?!1:(x.setMap(t,null),this.markers.splice(o,1),n||this.render(),!0)}removeMarkers(t,n){let o=!1;return t.forEach(e=>{o=this.removeMarker(e,!0)||o}),o&&!n&&this.render(),o}clearMarkers(t){this.markers.length=0,t||this.render()}render(){const t=this.getMap();if(t instanceof google.maps.Map&&t.getProjection()){google.maps.event.trigger(this,Z.CLUSTERING_BEGIN,this);const{clusters:n,changed:o}=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()});if(o||o==null){const e=new Set;for(const i of n)i.markers.length==1&&e.add(i.markers[0]);const s=[];for(const i of this.clusters)i.marker!=null&&(i.markers.length==1?e.has(i.marker)||x.setMap(i.marker,null):s.push(i.marker));this.clusters=n,this.renderClusters(),requestAnimationFrame(()=>s.forEach(i=>x.setMap(i,null)))}google.maps.event.trigger(this,Z.CLUSTERING_END,this)}}onAdd(){const t=this.getMap();Ee(t),this.idleListener=t.addListener("idle",this.render.bind(this)),this.render()}onRemove(){this.idleListener&&google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(t=>x.setMap(t,null)),this.clusters.forEach(t=>t.delete()),this.clusters=[]}renderClusters(){const t=new nr(this.markers,this.clusters),n=this.getMap();this.clusters.forEach(o=>{if(o.markers.length===1)o.marker=o.markers[0];else if(o.marker=this.renderer.render(o,t,n),o.markers.forEach(e=>x.setMap(e,null)),this.onClusterClick){const e=x.isAdvancedMarker(o.marker)?Z.GMP_CLICK:Z.CLUSTER_CLICK;o.marker.addListener(e,s=>{google.maps.event.trigger(this,Z.CLUSTER_CLICK,o),this.onClusterClick(s,o,n)})}x.setMap(o.marker,n)})}}var pt={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,n="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(n=!1));function e(a,c,h){this.fn=a,this.context=c,this.once=h||!1}function s(a,c,h,l,m){if(typeof h!="function")throw new TypeError("The listener must be a function");var d=new e(h,l||a,m),p=n?n+c:c;return a._events[p]?a._events[p].fn?a._events[p]=[a._events[p],d]:a._events[p].push(d):(a._events[p]=d,a._eventsCount++),a}function i(a,c){--a._eventsCount===0?a._events=new o:delete a._events[c]}function u(){this._events=new o,this._eventsCount=0}u.prototype.eventNames=function(){var c=[],h,l;if(this._eventsCount===0)return c;for(l in h=this._events)t.call(h,l)&&c.push(n?l.slice(1):l);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},u.prototype.listeners=function(c){var h=n?n+c:c,l=this._events[h];if(!l)return[];if(l.fn)return[l.fn];for(var m=0,d=l.length,p=new Array(d);m<d;m++)p[m]=l[m].fn;return p},u.prototype.listenerCount=function(c){var h=n?n+c:c,l=this._events[h];return l?l.fn?1:l.length:0},u.prototype.emit=function(c,h,l,m,d,p){var _=n?n+c:c;if(!this._events[_])return!1;var f=this._events[_],w=arguments.length,C,g;if(f.fn){switch(f.once&&this.removeListener(c,f.fn,void 0,!0),w){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,h),!0;case 3:return f.fn.call(f.context,h,l),!0;case 4:return f.fn.call(f.context,h,l,m),!0;case 5:return f.fn.call(f.context,h,l,m,d),!0;case 6:return f.fn.call(f.context,h,l,m,d,p),!0}for(g=1,C=new Array(w-1);g<w;g++)C[g-1]=arguments[g];f.fn.apply(f.context,C)}else{var A=f.length,L;for(g=0;g<A;g++)switch(f[g].once&&this.removeListener(c,f[g].fn,void 0,!0),w){case 1:f[g].fn.call(f[g].context);break;case 2:f[g].fn.call(f[g].context,h);break;case 3:f[g].fn.call(f[g].context,h,l);break;case 4:f[g].fn.call(f[g].context,h,l,m);break;default:if(!C)for(L=1,C=new Array(w-1);L<w;L++)C[L-1]=arguments[L];f[g].fn.apply(f[g].context,C)}}return!0},u.prototype.on=function(c,h,l){return s(this,c,h,l,!1)},u.prototype.once=function(c,h,l){return s(this,c,h,l,!0)},u.prototype.removeListener=function(c,h,l,m){var d=n?n+c:c;if(!this._events[d])return this;if(!h)return i(this,d),this;var p=this._events[d];if(p.fn)p.fn===h&&(!m||p.once)&&(!l||p.context===l)&&i(this,d);else{for(var _=0,f=[],w=p.length;_<w;_++)(p[_].fn!==h||m&&!p[_].once||l&&p[_].context!==l)&&f.push(p[_]);f.length?this._events[d]=f.length===1?f[0]:f:i(this,d)}return this},u.prototype.removeAllListeners=function(c){var h;return c?(h=n?n+c:c,this._events[h]&&i(this,h)):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,r.exports=u})(pt);var ar=pt.exports;const ur=at(ar);function lr(r,t,n,o){function e(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function u(h){try{c(o.next(h))}catch(l){i(l)}}function a(h){try{c(o.throw(h))}catch(l){i(l)}}function c(h){h.done?s(h.value):e(h.value).then(u,a)}c((o=o.apply(r,[])).next())})}function cr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var de,Ke;function hr(){return Ke||(Ke=1,de=function r(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var o,e,s;if(Array.isArray(t)){if(o=t.length,o!=n.length)return!1;for(e=o;e--!==0;)if(!r(t[e],n[e]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),o=s.length,o!==Object.keys(n).length)return!1;for(e=o;e--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[e]))return!1;for(e=o;e--!==0;){var i=s[e];if(!r(t[i],n[i]))return!1}return!0}return t!==t&&n!==n}),de}var pr=hr(),fr=cr(pr);const $e="__googleMapsScriptId";var G;(function(r){r[r.INITIALIZED=0]="INITIALIZED",r[r.LOADING=1]="LOADING",r[r.SUCCESS=2]="SUCCESS",r[r.FAILURE=3]="FAILURE"})(G||(G={}));class U{constructor({apiKey:t,authReferrerPolicy:n,channel:o,client:e,id:s=$e,language:i,libraries:u=[],mapIds:a,nonce:c,region:h,retries:l=3,url:m="https://maps.googleapis.com/maps/api/js",version:d}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=n,this.channel=o,this.client=e,this.id=s||$e,this.language=i,this.libraries=u,this.mapIds=a,this.nonce=c,this.region=h,this.retries=l,this.url=m,this.version=d,U.instance){if(!fr(this.options,U.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(U.instance.options)}`);return U.instance}U.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?G.FAILURE:this.done?G.SUCCESS:this.loading?G.LOADING:G.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,n)=>{this.loadCallback(o=>{o?n(o.error):t(window.google)})})}importLibrary(t){return this.execute(),google.maps.importLibrary(t)}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){var t,n;if(document.getElementById(this.id)){this.callback();return}const o={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(o).forEach(s=>!o[s]&&delete o[s]),!((n=(t=window==null?void 0:window.google)===null||t===void 0?void 0:t.maps)===null||n===void 0)&&n.importLibrary||(s=>{let i,u,a,c="The Google Maps JavaScript API",h="google",l="importLibrary",m="__ib__",d=document,p=window;p=p[h]||(p[h]={});const _=p.maps||(p.maps={}),f=new Set,w=new URLSearchParams,C=()=>i||(i=new Promise((g,A)=>lr(this,void 0,void 0,function*(){var L;yield u=d.createElement("script"),u.id=this.id,w.set("libraries",[...f]+"");for(a in s)w.set(a.replace(/[A-Z]/g,v=>"_"+v[0].toLowerCase()),s[a]);w.set("callback",h+".maps."+m),u.src=this.url+"?"+w,_[m]=g,u.onerror=()=>i=A(Error(c+" could not load.")),u.nonce=this.nonce||((L=d.querySelector("script[nonce]"))===null||L===void 0?void 0:L.nonce)||"",d.head.append(u)})));_[l]?console.warn(c+" only loads once. Ignoring:",s):_[l]=(g,...A)=>f.add(g)&&C().then(()=>_[l](g,...A))})(o);const e=this.libraries.map(s=>this.importLibrary(s));e.length||e.push(this.importLibrary("core")),Promise.all(e).then(()=>this.callback(),s=>{const i=new ErrorEvent("error",{error:s});this.loadErrorCallback(i)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const n=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${n} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},n)}else this.onerrorEvent=t,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var dr=H;function H(r,t){this.x=r,this.y=t}H.prototype={clone:function(){return new H(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,t){return this.clone()._rotateAround(r,t)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var t=r.x-this.x,n=r.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,t){return Math.atan2(this.x*t-this.y*r,this.x*r+this.y*t)},_matMult:function(r){var t=r[0]*this.x+r[1]*this.y,n=r[2]*this.x+r[3]*this.y;return this.x=t,this.y=n,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var t=Math.cos(r),n=Math.sin(r),o=t*this.x-n*this.y,e=n*this.x+t*this.y;return this.x=o,this.y=e,this},_rotateAround:function(r,t){var n=Math.cos(r),o=Math.sin(r),e=t.x+n*(this.x-t.x)-o*(this.y-t.y),s=t.y+o*(this.x-t.x)+n*(this.y-t.y);return this.x=e,this.y=s,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};H.convert=function(r){return r instanceof H?r:Array.isArray(r)?new H(r[0],r[1]):r};const F=at(dr);function me(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function E(){return(E=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r}).apply(null,arguments)}function ce(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,function(n,o){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e})(n,o)}(r,t)}function mr(r){var t=function(n,o){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var s=e.call(n,"string");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(r);return typeof t=="symbol"?t:t+""}var gr={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},_r=function(r){function t(){return r.apply(this,arguments)||this}ce(t,r);var n=t.prototype;return n.shouldComponentUpdate=function(){return!1},n.render=function(){return k.createElement("div",{ref:this.props.registerChild,style:gr})},t}(Se.Component),We=function(r){function t(o){var e;return(e=r.call(this)||this).gmapInstance=o,e}ce(t,r);var n=t.prototype;return n.getChildren=function(){return this.gmapInstance.props.children},n.getMousePosition=function(){return this.gmapInstance.mouse_},n.getUpdateCounter=function(){return this.gmapInstance.updateCounter_},n.dispose=function(){this.gmapInstance=null,this.removeAllListeners()},t}(ur),ee=function(r,t){for(var n=E({},(function(s){if(s==null)throw new TypeError("Cannot destructure "+s)}(r),r)),o=0;o<t.length;o++){var e=t[o];e in n&&delete n[e]}return n},vr=Object.prototype.hasOwnProperty;function Ve(r,t){return r===t?r!==0||t!==0||1/r==1/t:r!=r&&t!=t}function O(r,t){if(Ve(r,t))return!0;if(typeof r!="object"||r===null||typeof t!="object"||t===null)return!1;var n=Object.keys(r),o=Object.keys(t);if(n.length!==o.length)return!1;for(var e=0;e<n.length;e++)if(!vr.call(t,n[e])||!Ve(r[n[e]],t[n[e]]))return!1;return!0}var yr={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},wr={width:0,height:0,left:0,top:0,backgroundColor:"transparent",position:"absolute"},le=function(r){function t(o){var e;return(e=r.call(this,o)||this)._getState=function(){return{children:e.props.dispatcher.getChildren(),updateCounter:e.props.dispatcher.getUpdateCounter()}},e._onChangeHandler=function(){if(e.dimensionsCache_){var s=(e.state.children||[]).length,i=e._getState();e.setState(i,function(){return(i.children||[]).length!==s&&e._onMouseChangeHandler()})}},e._onChildClick=function(){e.props.onChildClick&&e.hoverChildProps_&&e.props.onChildClick(e.hoverKey_,e.hoverChildProps_)},e._onChildMouseDown=function(){e.props.onChildMouseDown&&e.hoverChildProps_&&e.props.onChildMouseDown(e.hoverKey_,e.hoverChildProps_)},e._onChildMouseEnter=function(s,i){e.dimensionsCache_&&(e.props.onChildMouseEnter&&e.props.onChildMouseEnter(s,i),e.hoverChildProps_=i,e.hoverKey_=s,e.setState({hoverKey:s}))},e._onChildMouseLeave=function(){if(e.dimensionsCache_){var s=e.hoverKey_;s!=null&&(e.props.onChildMouseLeave&&e.props.onChildMouseLeave(s,e.hoverChildProps_),e.hoverKey_=null,e.hoverChildProps_=null,e.setState({hoverKey:null}))}},e._onMouseAllow=function(s){s||e._onChildMouseLeave(),e.allowMouse_=s},e._onMouseChangeHandler=function(){e.allowMouse_&&e._onMouseChangeHandlerRaf()},e._onMouseChangeHandlerRaf=function(){if(e.dimensionsCache_){var s=e.props.dispatcher.getMousePosition();if(s){var i=[],u=e.props.getHoverDistance();if(k.Children.forEach(e.state.children,function(h,l){if(h&&(h.props.latLng!==void 0||h.props.lat!==void 0||h.props.lng!==void 0)){var m=h.key!=null?h.key:l,d=e.props.distanceToMouse(e.dimensionsCache_[m],s,h.props);d<u&&i.push({key:m,dist:d,props:h.props})}}),i.length){i.sort(function(h,l){return h.dist-l.dist});var a=i[0].key,c=i[0].props;e.hoverKey_!==a&&(e._onChildMouseLeave(),e._onChildMouseEnter(a,c))}else e._onChildMouseLeave()}else e._onChildMouseLeave()}},e._getDimensions=function(s){return e.dimensionsCache_[s]},e.dimensionsCache_={},e.hoverKey_=null,e.hoverChildProps_=null,e.allowMouse_=!0,e.state=E({},e._getState(),{hoverKey:null}),e}ce(t,r);var n=t.prototype;return n.componentDidMount=function(){this.props.dispatcher.on("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.on("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.on("kON_CLICK",this._onChildClick),this.props.dispatcher.on("kON_MDOWN",this._onChildMouseDown)},n.shouldComponentUpdate=function(o,e){return this.props.experimental===!0?!O(this.props,o)||!O(ee(this.state,["hoverKey"]),ee(e,["hoverKey"])):!O(this.props,o)||!O(this.state,e)},n.componentWillUnmount=function(){this.props.dispatcher.removeListener("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.removeListener("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.removeListener("kON_CLICK",this._onChildClick),this.props.dispatcher.removeListener("kON_MDOWN",this._onChildMouseDown),this.dimensionsCache_={}},n.render=function(){var o=this,e=this.props.style||yr;this.dimensionsCache_={};var s=k.Children.map(this.state.children,function(i,u){if(i){if(i.props.latLng===void 0&&i.props.lat===void 0&&i.props.lng===void 0)return k.cloneElement(i,{$geoService:o.props.geoService,$onMouseAllow:o._onMouseAllow,$prerender:o.props.prerender});var a=i.props.latLng!==void 0?i.props.latLng:{lat:i.props.lat,lng:i.props.lng},c=o.props.insideMapPanes?o.props.geoService.fromLatLngToDivPixel(a):o.props.geoService.fromLatLngToCenterPixel(a),h={left:c.x,top:c.y};if(i.props.seLatLng!==void 0||i.props.seLat!==void 0&&i.props.seLng!==void 0){var l=i.props.seLatLng!==void 0?i.props.seLatLng:{lat:i.props.seLat,lng:i.props.seLng},m=o.props.insideMapPanes?o.props.geoService.fromLatLngToDivPixel(l):o.props.geoService.fromLatLngToCenterPixel(l);h.width=m.x-c.x,h.height=m.y-c.y}var d=o.props.geoService.fromLatLngToContainerPixel(a),p=i.key!=null?i.key:u;return o.dimensionsCache_[p]=E({x:d.x,y:d.y},a),k.createElement("div",{key:p,style:E({},wr,h),className:i.props.$markerHolderClassName},k.cloneElement(i,{$hover:p===o.state.hoverKey,$getDimensions:o._getDimensions,$dimensionKey:p,$geoService:o.props.geoService,$onMouseAllow:o._onMouseAllow,$prerender:o.props.prerender}))}});return k.createElement("div",{style:e},s)},t}(Se.Component);le.propTypes={geoService:y.any,style:y.any,distanceToMouse:y.func,dispatcher:y.any,onChildClick:y.func,onChildMouseDown:y.func,onChildMouseLeave:y.func,onChildMouseEnter:y.func,getHoverDistance:y.func,insideMapPanes:y.bool,prerender:y.bool},le.defaultProps={insideMapPanes:!1,prerender:!1};var Cr={width:"50%",height:"50%",left:"50%",top:"50%",margin:0,padding:0,position:"absolute"};function Mr(r){return k.createElement("div",{style:Cr},k.createElement(le,E({},r,{prerender:!0})))}var ge,Y,be,Er=["key"],br=new Promise(function(r){be=r}),Ye=function(r,t){if(!r)return br;if(Y)return Y;r.libraries||(r.libraries=[]);var n=[].concat(r.libraries);if(t&&(n.length!==0&&n.includes("visualization")||n.push("visualization"),console.warn("heatmapLibrary will be deprecated in the future. Please use { libraries: ['visualization'] } in bootstrapURLKeys property instead")),typeof window>"u")throw new Error("google map cannot be loaded outside browser env");var o=r.key,e=function(s,i){if(s==null)return{};var u={};for(var a in s)if({}.hasOwnProperty.call(s,a)){if(i.indexOf(a)!==-1)continue;u[a]=s[a]}return u}(r,Er);return ge||(ge=new U(E({apiKey:o||""},e,{libraries:n}))),Y=ge.load().then(function(){return be(window.google.maps),window.google.maps}),be(Y),Y};function ft(r,t,n){var o=n-t;return r===n?r:((r-t)%o+o)%o+t}var z=function(){function r(t,n){if(isNaN(t)||isNaN(n))throw new Error("Invalid LatLng object: ("+t+", "+n+")");this.lat=+t,this.lng=+n}return r.prototype.wrap=function(){return new r(this.lat,ft(this.lng,-180,180))},r}();z.convert=function(r){return r instanceof z?r:Array.isArray(r)?new z(r[0],r[1]):"lng"in r&&"lat"in r?new z(r.lat,r.lng):r};var Lr=function(){function r(e,s,i){this.tileSize=e||512,this._minZoom=s||0,this._maxZoom=i||52,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this.zoom=0,this.center=new z(0,0),this.angle=0}var t,n,o=r.prototype;return o.zoomScale=function(e){return Math.pow(2,e)},o.scaleZoom=function(e){return Math.log(e)/Math.LN2},o.project=function(e,s){return new F(this.lngX(e.lng,s),this.latY(e.lat,s))},o.unproject=function(e,s){return new z(this.yLat(e.y,s),this.xLng(e.x,s))},o.lngX=function(e,s){return(180+e)*(s||this.worldSize)/360},o.latY=function(e,s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*(s||this.worldSize)/360},o.xLng=function(e,s){return 360*e/(s||this.worldSize)-180},o.yLat=function(e,s){return 360/Math.PI*Math.atan(Math.exp((180-360*e/(s||this.worldSize))*Math.PI/180))-90},o.locationPoint=function(e){var s=this.project(e);return this.centerPoint._sub(this.point._sub(s)._rotate(this.angle))},o.pointLocation=function(e){var s=this.centerPoint._sub(e)._rotate(-this.angle);return this.unproject(this.point.sub(s))},t=r,(n=[{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom=e,this.zoom=Math.max(this.zoom,e)}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom=e,this.zoom=Math.min(this.zoom,e)}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerPoint",get:function(){return new F(0,0)}},{key:"size",get:function(){return new F(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(e){this.angle=-ft(e,-180,180)*Math.PI/180}},{key:"zoom",get:function(){return this._zoom},set:function(e){var s=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom}},{key:"x",get:function(){return this.lngX(this.center.lng)}},{key:"y",get:function(){return this.latY(this.center.lat)}},{key:"point",get:function(){return new F(this.x,this.y)}}])&&function(e,s){for(var i=0;i<s.length;i++){var u=s[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,mr(u.key),u)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),r}(),xr=function(){function r(n){this.hasSize_=!1,this.hasView_=!1,this.transform_=new Lr(n||512)}var t=r.prototype;return t.setView=function(n,o,e){this.transform_.center=z.convert(n),this.transform_.zoom=+o,this.transform_.bearing=+e,this.hasView_=!0},t.setViewSize=function(n,o){this.transform_.width=n,this.transform_.height=o,this.hasSize_=!0},t.setMapCanvasProjection=function(n,o){this.maps_=n,this.mapCanvasProjection_=o},t.canProject=function(){return this.hasSize_&&this.hasView_},t.hasSize=function(){return this.hasSize_},t.fromLatLngToCenterPixel=function(n){return this.transform_.locationPoint(z.convert(n))},t.fromLatLngToDivPixel=function(n){if(this.mapCanvasProjection_){var o=new this.maps_.LatLng(n.lat,n.lng);return this.mapCanvasProjection_.fromLatLngToDivPixel(o)}return this.fromLatLngToCenterPixel(n)},t.fromLatLngToContainerPixel=function(n){if(this.mapCanvasProjection_){var o=new this.maps_.LatLng(n.lat,n.lng);return this.mapCanvasProjection_.fromLatLngToContainerPixel(o)}var e=this.fromLatLngToCenterPixel(n);return e.x-=this.transform_.worldSize*Math.round(e.x/this.transform_.worldSize),e.x+=this.transform_.width/2,e.y+=this.transform_.height/2,e},t.fromContainerPixelToLatLng=function(n){if(this.mapCanvasProjection_){var o=this.mapCanvasProjection_.fromContainerPixelToLatLng(n);return{lat:o.lat(),lng:o.lng()}}var e=E({},n);e.x-=this.transform_.width/2,e.y-=this.transform_.height/2;var s=this.transform_.pointLocation(F.convert(e));return s.lng-=360*Math.round(s.lng/360),s},t.getWidth=function(){return this.transform_.width},t.getHeight=function(){return this.transform_.height},t.getZoom=function(){return this.transform_.zoom},t.getCenter=function(){return this.transform_.pointLocation({x:0,y:0})},t.getBounds=function(n,o){var e=n&&n[0]||0,s=n&&n[1]||0,i=n&&n[2]||0,u=n&&n[3]||0;if(this.getWidth()-s-u>0&&this.getHeight()-e-i>0){var a=this.transform_.pointLocation(F.convert({x:u-this.getWidth()/2,y:e-this.getHeight()/2})),c=this.transform_.pointLocation(F.convert({x:this.getWidth()/2-s,y:this.getHeight()/2-i})),h=[a.lat,a.lng,c.lat,c.lng,c.lat,a.lng,a.lat,c.lng];return o&&(h=h.map(function(l){return Math.round(l*o)/o})),h}return[0,0,0,0]},r}();function Je(r){if(window.requestAnimationFrame)return window.requestAnimationFrame(r);var t=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return t?t(r):window.setTimeout(r,1e3/60)}var kr=Math.log2?Math.log2:function(r){return Math.log(r)/Math.LN2};function Xe(r,t){return Object.keys(r).reduce(function(n,o){return t(r[o])&&(n[o]=r[o]),n},{})}var R=function(r){if(r!==null&&typeof r=="object"){if(Object.keys(r).length===0)return!0}else if(r==null||r==="")return!0;return!1},Or=Object.prototype.toString;function oe(r){return typeof r=="number"||function(t){return!!t&&typeof t=="object"}(r)&&Or.call(r)==="[object Number]"}var ie=null;function Qe(){if(ie)return ie;if(typeof navigator<"u"){var r=navigator.userAgent.indexOf("MSIE")>-1,t=navigator.userAgent.indexOf("Firefox")>-1,n=navigator.userAgent.toLowerCase().indexOf("op")>-1,o=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Safari")>-1;return o&&e&&(e=!1),o&&n&&(o=!1),ie={isExplorer:r,isFirefox:t,isOpera:n,isChrome:o,isSafari:e}}return ie={isChrome:!0,isExplorer:!1,isFirefox:!1,isOpera:!1,isSafari:!1}}var et=function(r){return Function.prototype.toString.call(r)};function Q(r){if(!r||typeof r!="object")return!1;var t=typeof r.constructor=="function"?Object.getPrototypeOf(r):Object.prototype;if(t===null)return!0;var n=t.constructor;return typeof n=="function"&&n instanceof n&&et(n)===et(Object)}function J(r,t,n,o){r.addEventListener(t,n,function(){var e=!1;try{var s=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",s,s),window.removeEventListener("test",s,s)}catch{e=!1}return e}()?{capture:o,passive:!0}:o)}var T,Le=!(typeof window>"u"||!window.document||!window.document.createElement);T=Le?window:typeof self<"u"?self:void 0;var tt,xe=typeof document<"u"&&document.attachEvent,rt=!1;if(Le&&!xe){var Ar=function(){var r=T.requestAnimationFrame||T.mozRequestAnimationFrame||T.webkitRequestAnimationFrame||function(t){return T.setTimeout(t,20)};return function(t){return r(t)}}(),Sr=(tt=T.cancelAnimationFrame||T.mozCancelAnimationFrame||T.webkitCancelAnimationFrame||T.clearTimeout,function(r){return tt(r)}),ke=function(r){var t=r.__resizeTriggers__,n=t.firstElementChild,o=t.lastElementChild,e=n.firstElementChild;o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight,e.style.width=n.offsetWidth+1+"px",e.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},nt=function(r){var t=this;ke(this),this.__resizeRAF__&&Sr(this.__resizeRAF__),this.__resizeRAF__=Ar(function(){(function(n){return n.offsetWidth!=n.__resizeLast__.width||n.offsetHeight!=n.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(n){n.call(t,r)}))})},_e=!1,ve="",Oe="animationstart",ye="Webkit Moz O ms".split(" "),Tr="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" ");if(Le){var ot=document.createElement("fakeelement");if(ot.style.animationName!==void 0&&(_e=!0),_e===!1){for(var X=0;X<ye.length;X++)if(ot.style[ye[X]+"AnimationName"]!==void 0){ve="-"+ye[X].toLowerCase()+"-",Oe=Tr[X],_e=!0;break}}}var Ae="resizeanim",Pr="@"+ve+"keyframes "+Ae+" { from { opacity: 0; } to { opacity: 0; } } ",Dr=ve+"animation: 1ms "+Ae+"; "}var ae=ue.createPortal!==void 0,it=ae?ue.createPortal:ue.unstable_renderSubtreeIntoContainer,se=function(r){return Q(r)?r:{lat:r[0],lng:r[1]}},st=function(r,t){return t<r?r:t},we=function(r){function t(o){var e;if((e=r.call(this,o)||this)._getMinZoom=function(){if(e.geoService_.getWidth()>0||e.geoService_.getHeight()>0){var i=Math.ceil(e.geoService_.getWidth()/256)+2,u=Math.ceil(e.geoService_.getHeight()/256)+2,a=Math.max(i,u);return Math.ceil(kr(a))}return 3},e._computeMinZoom=function(i){return R(i)?e._getMinZoom():i},e._mapDomResizeCallback=function(){if(e.resetSizeOnIdle_=!0,e.maps_){var i=e.props.center||e.props.defaultCenter,u=e.map_.getCenter();e.maps_.event.trigger(e.map_,"resize"),e.map_.setCenter(e.props.resetBoundsOnResize?i:u)}},e._setLayers=function(i){i.forEach(function(u){e.layers_[u]=new e.maps_[u],e.layers_[u].setMap(e.map_)})},e._renderPortal=function(){return k.createElement(le,{experimental:e.props.experimental,onChildClick:e._onChildClick,onChildMouseDown:e._onChildMouseDown,onChildMouseEnter:e._onChildMouseEnter,onChildMouseLeave:e._onChildMouseLeave,geoService:e.geoService_,insideMapPanes:!0,distanceToMouse:e.props.distanceToMouse,getHoverDistance:e._getHoverDistance,dispatcher:e.markersDispatcher_})},e._initMap=function(){if(!e.initialized_){e.initialized_=!0;var i=se(e.props.center||e.props.defaultCenter);e.geoService_.setView(i,e.props.zoom||e.props.defaultZoom,0),e._onBoundsChanged();var u=E({},e.props.apiKey&&{key:e.props.apiKey},e.props.bootstrapURLKeys);e.props.googleMapLoader(u,e.props.heatmapLibrary).then(function(a){if(e.mounted_){var c,h,l=e.geoService_.getCenter(),m={zoom:e.props.zoom||e.props.defaultZoom,center:new a.LatLng(l.lat,l.lng)};e.props.heatmap.positions&&(Object.assign(me(e),{heatmap:(c=a,h=e.props.heatmap,new c.visualization.HeatmapLayer({data:h.positions.reduce(function(M,N){var b=N.weight,P=b===void 0?1:b;return M.push({location:new c.LatLng(N.lat,N.lng),weight:P}),M},[])}))}),function(M,N){var b=N.options,P=b===void 0?{}:b;Object.keys(P).map(function(K){return M.set(K,P[K])})}(e.heatmap,e.props.heatmap));var d=Xe(a,Q),p=typeof e.props.options=="function"?e.props.options(d):e.props.options,_=!R(e.props.draggable)&&{draggable:e.props.draggable},f=e._computeMinZoom(p.minZoom);e.minZoom_=f;var w=E({},{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3},{minZoom:f},p,m);e.defaultDraggableOption_=R(w.draggable)?e.defaultDraggableOption_:w.draggable;var C=E({},w,_);C.minZoom=st(C.minZoom,f);var g=new a.Map(e.googleMapDom_,C);e.map_=g,e.maps_=a,e._setLayers(e.props.layerTypes);var A=a.version.match(/^3\.(\d+)\./),L=A&&Number(A[1]),v=me(e),S=Object.assign(new a.OverlayView,{onAdd:function(){var M=typeof screen<"u"?screen.width+"px":"2000px",N=typeof screen<"u"?screen.height+"px":"2000px",b=document.createElement("div");if(b.style.backgroundColor="transparent",b.style.position="absolute",b.style.left="0px",b.style.top="0px",b.style.width=M,b.style.height=N,v.props.overlayViewDivStyle){var P=v.props.overlayViewDivStyle;typeof P=="object"&&Object.keys(P).forEach(function(K){b.style[K]=P[K]})}this.getPanes().overlayMouseTarget.appendChild(b),v.geoService_.setMapCanvasProjection(a,S.getProjection()),ae?v.setState({overlay:b}):it(v,v._renderPortal(),b,function(){return v.setState({overlay:b})})},onRemove:function(){var M=v.state.overlay;M&&!ae&&ue.unmountComponentAtNode(M),v.setState({overlay:null})},draw:function(){if(v.updateCounter_++,v._onBoundsChanged(g,a,!v.props.debounced),v.googleApiLoadedCalled_||(v._onGoogleApiLoaded({map:g,maps:a,ref:v.googleMapDom_}),v.googleApiLoadedCalled_=!0),v.mouse_){var M=v.geoService_.fromContainerPixelToLatLng(v.mouse_);v.mouse_.lat=M.lat,v.mouse_.lng=M.lng}v._onChildMouseMove(),v.markersDispatcher_&&(dt.flushSync(function(){v.markersDispatcher_.emit("kON_CHANGE")}),v.fireMouseEventOnIdle_&&v.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"))}});e.overlay_=S,S.setMap(g),e.props.heatmap.positions&&e.heatmap.setMap(g),e.props.onTilesLoaded&&a.event.addListener(g,"tilesloaded",function(){v._onTilesLoaded()}),a.event.addListener(g,"zoom_changed",function(){v.geoService_.getZoom()!==g.getZoom()&&(v.zoomAnimationInProgress_||(v.zoomAnimationInProgress_=!0,v._onZoomAnimationStart(g.zoom)),L<32)&&(new Date().getTime()-e.zoomControlClickTime_<300?Je(function(){return Je(function(){v.updateCounter_++,v._onBoundsChanged(g,a)})}):(v.updateCounter_++,v._onBoundsChanged(g,a)))}),a.event.addListener(g,"idle",function(){if(e.resetSizeOnIdle_){e._setViewSize();var M=e._computeMinZoom(p.minZoom);M!==e.minZoom_&&(e.minZoom_=M,g.setOptions({minZoom:M})),e.resetSizeOnIdle_=!1}v.zoomAnimationInProgress_&&(v.zoomAnimationInProgress_=!1,v._onZoomAnimationEnd(g.zoom)),v.updateCounter_++,v._onBoundsChanged(g,a),v.dragTime_=0,v.markersDispatcher_&&v.markersDispatcher_.emit("kON_CHANGE")}),a.event.addListener(g,"mouseover",function(){v.mouseInMap_=!0}),a.event.addListener(g,"click",function(){v.mouseInMap_=!0}),a.event.addListener(g,"mouseout",function(){v.mouseInMap_=!1,v.mouse_=null,v.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")}),a.event.addListener(g,"drag",function(){v.dragTime_=new Date().getTime(),v._onDrag(g)}),a.event.addListener(g,"dragend",function(){var M=a.event.addListener(g,"idle",function(){a.event.removeListener(M),v._onDragEnd(g)})}),a.event.addListener(g,"maptypeid_changed",function(){v._onMapTypeIdChange(g.getMapTypeId())})}}).catch(function(a){throw e._onGoogleApiLoaded({map:null,maps:null,ref:e.googleMapDom_}),console.error(a),a})}},e._onGoogleApiLoaded=function(){var i;e.props.onGoogleApiLoaded&&(i=e.props).onGoogleApiLoaded.apply(i,arguments)},e._getHoverDistance=function(){return e.props.hoverDistance},e._onDrag=function(){var i;return e.props.onDrag&&(i=e.props).onDrag.apply(i,arguments)},e._onDragEnd=function(){var i;return e.props.onDragEnd&&(i=e.props).onDragEnd.apply(i,arguments)},e._onMapTypeIdChange=function(){var i;return e.props.onMapTypeIdChange&&(i=e.props).onMapTypeIdChange.apply(i,arguments)},e._onZoomAnimationStart=function(){var i;return e.props.onZoomAnimationStart&&(i=e.props).onZoomAnimationStart.apply(i,arguments)},e._onZoomAnimationEnd=function(){var i;return e.props.onZoomAnimationEnd&&(i=e.props).onZoomAnimationEnd.apply(i,arguments)},e._onTilesLoaded=function(){return e.props.onTilesLoaded&&e.props.onTilesLoaded()},e._onChildClick=function(){var i;if(e.props.onChildClick)return(i=e.props).onChildClick.apply(i,arguments)},e._onChildMouseDown=function(i,u){e.childMouseDownArgs_=[i,u],e.props.onChildMouseDown&&e.props.onChildMouseDown(i,u,E({},e.mouse_))},e._onChildMouseUp=function(){var i;e.childMouseDownArgs_&&(e.props.onChildMouseUp&&(i=e.props).onChildMouseUp.apply(i,e.childMouseDownArgs_.concat([E({},e.mouse_)])),e.childMouseDownArgs_=null,e.childMouseUpTime_=new Date().getTime())},e._onChildMouseMove=function(){var i;e.childMouseDownArgs_&&e.props.onChildMouseMove&&(i=e.props).onChildMouseMove.apply(i,e.childMouseDownArgs_.concat([E({},e.mouse_)]))},e._onChildMouseEnter=function(){var i;if(e.props.onChildMouseEnter)return(i=e.props).onChildMouseEnter.apply(i,arguments)},e._onChildMouseLeave=function(){var i;if(e.props.onChildMouseLeave)return(i=e.props).onChildMouseLeave.apply(i,arguments)},e._setViewSize=function(){if(e.mounted_){if(document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)e.geoService_.setViewSize(window.innerWidth,window.innerHeight);else{var i=e.googleMapDom_;e.geoService_.setViewSize(i.clientWidth,i.clientHeight)}e._onBoundsChanged()}},e._onWindowResize=function(){e.resetSizeOnIdle_=!0},e._onMapMouseMove=function(i){if(e.mouseInMap_){var u=new Date().getTime();u-e.mouseMoveTime_>50&&(e.boundingRect_=i.currentTarget.getBoundingClientRect()),e.mouseMoveTime_=u;var a=i.clientX-e.boundingRect_.left,c=i.clientY-e.boundingRect_.top;e.mouse_||(e.mouse_={x:0,y:0,lat:0,lng:0}),e.mouse_.x=a,e.mouse_.y=c;var h=e.geoService_.fromContainerPixelToLatLng(e.mouse_);e.mouse_.lat=h.lat,e.mouse_.lng=h.lng,e._onChildMouseMove(),u-e.dragTime_<100?e.fireMouseEventOnIdle_=!0:(e.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"),e.fireMouseEventOnIdle_=!1)}},e._onClick=function(){var i;return e.props.onClick&&!e.childMouseDownArgs_&&new Date().getTime()-e.childMouseUpTime_>300&&e.dragTime_===0&&(i=e.props).onClick.apply(i,arguments)},e._onMapClick=function(i){e.markersDispatcher_&&(e._onMapMouseMove(i),new Date().getTime()-e.dragTime_>100&&(e.mouse_&&e._onClick(E({},e.mouse_,{event:i})),e.markersDispatcher_.emit("kON_CLICK",i)))},e._onMapMouseDownNative=function(i){e.mouseInMap_&&e._onMapMouseDown(i)},e._onMapMouseDown=function(i){e.markersDispatcher_&&new Date().getTime()-e.dragTime_>100&&(e._onMapMouseMove(i),e.markersDispatcher_.emit("kON_MDOWN",i))},e._onMapMouseDownCapture=function(){Qe().isChrome&&(e.zoomControlClickTime_=new Date().getTime())},e._onKeyDownCapture=function(){Qe().isChrome&&(e.zoomControlClickTime_=new Date().getTime())},e._isCenterDefined=function(i){return i&&(Q(i)&&oe(i.lat)&&oe(i.lng)||i.length===2&&oe(i[0])&&oe(i[1]))},e._onBoundsChanged=function(i,u,a){if(i){var c=i.getCenter();e.geoService_.setView([c.lat(),c.lng()],i.getZoom(),0)}if((e.props.onChange||e.props.onBoundsChange)&&e.geoService_.canProject()){var h=e.geoService_.getZoom(),l=e.geoService_.getBounds(),m=e.geoService_.getCenter();if(!function(p,_,f){if(p&&_){for(var w=0;w!==p.length;++w)if(Math.abs(p[w]-_[w])>1e-5)return!1;return!0}return!1}(l,e.prevBounds_)&&a!==!1){var d=e.geoService_.getBounds(e.props.margin);e.props.onBoundsChange&&e.props.onBoundsChange(e.centerIsObject_?E({},m):[m.lat,m.lng],h,l,d),e.props.onChange&&e.props.onChange({center:E({},m),zoom:h,bounds:{nw:{lat:l[0],lng:l[1]},se:{lat:l[2],lng:l[3]},sw:{lat:l[4],lng:l[5]},ne:{lat:l[6],lng:l[7]}},marginBounds:{nw:{lat:d[0],lng:d[1]},se:{lat:d[2],lng:d[3]},sw:{lat:d[4],lng:d[5]},ne:{lat:d[6],lng:d[7]}},size:e.geoService_.hasSize()?{width:e.geoService_.getWidth(),height:e.geoService_.getHeight()}:{width:0,height:0}}),e.prevBounds_=l}}},e._registerChild=function(i){e.googleMapDom_=i},e.mounted_=!1,e.initialized_=!1,e.googleApiLoadedCalled_=!1,e.map_=null,e.maps_=null,e.prevBounds_=null,e.heatmap=null,e.layers_={},e.mouse_=null,e.mouseMoveTime_=0,e.boundingRect_=null,e.mouseInMap_=!0,e.dragTime_=0,e.fireMouseEventOnIdle_=!1,e.updateCounter_=0,e.markersDispatcher_=new We(me(e)),e.geoService_=new xr(256),e.centerIsObject_=Q(e.props.center),e.minZoom_=3,e.defaultDraggableOption_=!0,e.zoomControlClickTime_=0,e.childMouseDownArgs_=null,e.childMouseUpTime_=0,e.googleMapDom_=null,e._isCenterDefined(e.props.center||e.props.defaultCenter)){var s=se(e.props.center||e.props.defaultCenter);e.geoService_.setView(s,e.props.zoom||e.props.defaultZoom,0)}return e.zoomAnimationInProgress_=!1,e.state={overlay:null},e}ce(t,r);var n=t.prototype;return n.componentDidMount=function(){var o=this;this.mounted_=!0,this.markersDispatcher_=new We(this),J(window,"resize",this._onWindowResize,!1),J(window,"keydown",this._onKeyDownCapture,!0);var e=this.googleMapDom_;e&&J(e,"mousedown",this._onMapMouseDownNative,!0),J(window,"mouseup",this._onChildMouseUp,!1);var s=E({},this.props.apiKey&&{key:this.props.apiKey},this.props.bootstrapURLKeys);this.props.googleMapLoader(s,this.props.heatmapLibrary),setTimeout(function(){o._setViewSize(),o._isCenterDefined(o.props.center||o.props.defaultCenter)&&o._initMap()},0,this),this.props.resetBoundsOnResize&&function(i,u){if(i.parentNode===void 0){var a=document.createElement("div");i.parentNode=a}i=i.parentNode,xe?i.attachEvent("onresize",u):(i.__resizeTriggers__||(getComputedStyle(i).position=="static"&&(i.style.position="relative"),function(){if(!rt){var c=(Pr||"")+".resize-triggers { "+(Dr||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',h=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css",l.styleSheet?l.styleSheet.cssText=c:l.appendChild(document.createTextNode(c)),h.appendChild(l),rt=!0}}(),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=document.createElement("div")).className="resize-triggers",i.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',i.appendChild(i.__resizeTriggers__),ke(i),J(i,"scroll",nt,!0),Oe&&i.__resizeTriggers__.addEventListener(Oe,function(c){c.animationName==Ae&&ke(i)})),i.__resizeListeners__.push(u))}(e,this._mapDomResizeCallback)},n.shouldComponentUpdate=function(o,e){return!O(ee(this.props,["draggable"]),ee(o,["draggable"]))||!O(this.state,e)},n.componentDidUpdate=function(o){var e=this;if(!this._isCenterDefined(o.center)&&this._isCenterDefined(this.props.center)&&setTimeout(function(){return e._initMap()},0),this.map_){var s=this.geoService_.getCenter();if(this._isCenterDefined(this.props.center)){var i=se(this.props.center),u=this._isCenterDefined(o.center)?se(o.center):null;(!u||Math.abs(i.lat-u.lat)+Math.abs(i.lng-u.lng)>1e-5)&&Math.abs(i.lat-s.lat)+Math.abs(i.lng-s.lng)>1e-5&&this.map_.panTo({lat:i.lat,lng:i.lng})}if(R(this.props.zoom)||Math.abs(this.props.zoom-o.zoom)>0&&this.map_.setZoom(this.props.zoom),!R(o.draggable)&&R(this.props.draggable)?this.map_.setOptions({draggable:this.defaultDraggableOption_}):O(o.draggable,this.props.draggable)||this.map_.setOptions({draggable:this.props.draggable}),!R(this.props.options)&&!O(o.options,this.props.options)){var a=Xe(this.maps_,Q),c=typeof this.props.options=="function"?this.props.options(a):this.props.options;if("minZoom"in(c=ee(c,["zoom","center","draggable"]))){var h=this._computeMinZoom(c.minZoom);c.minZoom=st(c.minZoom,h)}this.map_.setOptions(c)}O(this.props.layerTypes,o.layerTypes)||(Object.keys(this.layers_).forEach(function(l){e.layers_[l].setMap(null),delete e.layers_[l]}),this._setLayers(this.props.layerTypes)),this.heatmap&&!O(this.props.heatmap.positions,o.heatmap.positions)&&this.heatmap.setData(this.props.heatmap.positions.map(function(l){return{location:new e.maps_.LatLng(l.lat,l.lng),weight:l.weight}})),this.heatmap&&!O(this.props.heatmap.options,o.heatmap.options)&&Object.keys(this.props.heatmap.options).forEach(function(l){e.heatmap.set(l,e.props.heatmap.options[l])})}this.markersDispatcher_.emit("kON_CHANGE"),O(this.props.hoverDistance,o.hoverDistance)||this.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")},n.componentWillUnmount=function(){this.mounted_=!1;var o,e,s=this.googleMapDom_;s&&s.removeEventListener("mousedown",this._onMapMouseDownNative,!0),window.removeEventListener("resize",this._onWindowResize),window.removeEventListener("keydown",this._onKeyDownCapture),window.removeEventListener("mouseup",this._onChildMouseUp,!1),this.props.resetBoundsOnResize&&(e=this._mapDomResizeCallback,o=(o=s).parentNode,xe?o.detachEvent("onresize",e):(o.__resizeListeners__.splice(o.__resizeListeners__.indexOf(e),1),o.__resizeListeners__.length||(o.removeEventListener("scroll",nt),o.__resizeTriggers__=!o.removeChild(o.__resizeTriggers__)))),this.overlay_&&this.overlay_.setMap(null),this.maps_&&this.map_&&this.props.shouldUnregisterMapOnUnmount&&(this.map_.setOptions({scrollwheel:!1}),this.maps_.event.clearInstanceListeners(this.map_)),this.props.shouldUnregisterMapOnUnmount&&(this.map_=null,this.maps_=null),this.markersDispatcher_.dispose(),this.resetSizeOnIdle_=!1,this.props.shouldUnregisterMapOnUnmount&&(delete this.map_,delete this.markersDispatcher_)},n.render=function(){var o=this.state.overlay,e=o?null:k.createElement(Mr,{experimental:this.props.experimental,onChildClick:this._onChildClick,onChildMouseDown:this._onChildMouseDown,onChildMouseEnter:this._onChildMouseEnter,onChildMouseLeave:this._onChildMouseLeave,geoService:this.geoService_,insideMapPanes:!1,distanceToMouse:this.props.distanceToMouse,getHoverDistance:this._getHoverDistance,dispatcher:this.markersDispatcher_});return k.createElement("div",{style:this.props.style,onMouseMove:this._onMapMouseMove,onMouseDownCapture:this._onMapMouseDownCapture,onClick:this._onMapClick},k.createElement(_r,{registerChild:this._registerChild}),ae&&o&&it(this._renderPortal(),o),e)},t}(Se.Component);we.propTypes={apiKey:y.string,bootstrapURLKeys:y.any,defaultCenter:y.oneOfType([y.array,y.shape({lat:y.number,lng:y.number})]),center:y.oneOfType([y.array,y.shape({lat:y.number,lng:y.number})]),defaultZoom:y.number,zoom:y.number,onBoundsChange:y.func,onChange:y.func,onClick:y.func,onChildClick:y.func,onChildMouseDown:y.func,onChildMouseUp:y.func,onChildMouseMove:y.func,onChildMouseEnter:y.func,onChildMouseLeave:y.func,onZoomAnimationStart:y.func,onZoomAnimationEnd:y.func,onDrag:y.func,onDragEnd:y.func,onMapTypeIdChange:y.func,onTilesLoaded:y.func,options:y.any,distanceToMouse:y.func,hoverDistance:y.number,debounced:y.bool,margin:y.array,googleMapLoader:y.any,onGoogleApiLoaded:y.func,yesIWantToUseGoogleMapApiInternals:y.bool,draggable:y.bool,style:y.any,resetBoundsOnResize:y.bool,layerTypes:y.arrayOf(y.string),shouldUnregisterMapOnUnmount:y.bool},we.defaultProps={distanceToMouse:function(r,t){return Math.sqrt((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y))},hoverDistance:30,debounced:!0,options:function(){return{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3}},googleMapLoader:Ye,yesIWantToUseGoogleMapApiInternals:!1,style:{width:"100%",height:"100%",margin:0,padding:0,position:"relative"},layerTypes:[],heatmap:{},heatmapLibrary:!1,shouldUnregisterMapOnUnmount:!0},we.googleMapLoader=Ye;export{zr as M,we as m};
