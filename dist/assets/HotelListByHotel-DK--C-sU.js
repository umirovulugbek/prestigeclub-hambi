import{u as T,b as U,c as B,r as d,A as F,j as t,d as y,S as x,f as G,H as L,G as z,F as W,l as k}from"./index-Watmp8Sy.js";const V=({darkmode:r})=>{const _=T(),{t:q}=U(),e=B(),[C,D]=d.useState(!1),[p,$]=d.useState([]),[f,S]=d.useState({}),[J,K]=d.useState(!0),[m,E]=d.useState(1),[R,h]=d.useState(!1),[H,g]=d.useState({}),[i,v]=d.useState({}),[o,N]=d.useState({adultCounter:2,childrenCount:0});d.useEffect(()=>{e!=null&&e.town_from_inc&&(e!=null&&e.tour_operator_id)&&v(l=>({...l,town_from_inc:e==null?void 0:e.town_from_inc,tour_operator_id:e==null?void 0:e.tour_operator_id,state_id:e==null?void 0:e.state_id,hotel_key:e==null?void 0:e.hotel_key,towns:e==null?void 0:e.towns,tour_somo_id:e==null?void 0:e.tour_somo_id})),(e!=null&&e.adult||e!=null&&e.childs)&&N(l=>({...l,number_of_tourists:Number((e==null?void 0:e.adult)===void 0?2:e==null?void 0:e.adult)+Number((e==null?void 0:e.childs)===void 0?0:e==null?void 0:e.childs),childrenCount:Number((e==null?void 0:e.childs)===void 0?0:e==null?void 0:e.childs),adultCounter:Number((e==null?void 0:e.adult)===void 0?1:e==null?void 0:e.adult)})),window.scrollTo({top:0,behavior:"smooth"})},[]),d.useEffect(()=>{window.location.search.includes("&checkin=")?A():h(!0),window.scrollTo({top:0,behavior:"smooth"})},[]);const A=l=>{F().get(`api/v1/somo-travel/tour-price-top-hotel${l===void 0?window.location.search:"?"+l}&page=${m}&per_page=3`).then(s=>{var u,n;let a=(u=s==null?void 0:s.data)==null?void 0:u.data,w=m==1?a:[...p,...a];$(w),S((n=s==null?void 0:s.data)==null?void 0:n.state),E(c=>c+1),h(!1)}).catch(s=>{console.log(s)}).finally(()=>{D(!1)})},I=()=>{let l=!0,s={};if(o!=null&&o.departure_date||(l=!1,s={...s,departure_date:!0}),o!=null&&o.number_of_tourists||(l=!1,s={...s,number_of_tourists:!0}),o!=null&&o.number_of_days||(l=!1,s={...s,number_of_days:!0}),l){const a={town_from_inc:i==null?void 0:i.town_from_inc,tour_operator_id:i==null?void 0:i.tour_operator_id,state_id:i==null?void 0:i.state_id,checkin:o==null?void 0:o.departure_date,nights:o==null?void 0:o.number_of_days,tour_somo_id:i==null?void 0:i.tour_somo_id,adult:o==null?void 0:o.adultCounter,childs:o==null?void 0:o.childrenCount,hotel_key:i==null?void 0:i.hotel_key,towns:i!=null&&i.towns?[i==null?void 0:i.towns]:[]},w=n=>{const[c,M,P]=n.split("-");return`${c}${M}${P}`},u=Object.keys(a).map(n=>Array.isArray(a[n])?a[n].map(c=>`${n}[]=${encodeURIComponent(c)}`).join("&"):n==="checkin"?`${n}=${encodeURIComponent(w(a[n]))}`:`${n}=${encodeURIComponent(a[n])}`).join("&");A(`${u}`),_(`/hotels/result-hotel/?${u}`)}else g(s),window.scrollTo({top:0,behavior:"smooth"})};return t.jsx("div",{className:"min-h-screen pb-[75px] bg-neutralSand dark:bg-[#141414] ",children:C?t.jsxs("div",{className:"container_main !px-0",children:[t.jsx("div",{className:"bg-white dark:bg-[#272829] rounded-bl-[20px] rounded-br-[20px] py-[20px]",children:t.jsx("div",{className:"flex items-center w-full pl-[15px]",children:t.jsx(y,{fill:r?"#fff":"#141414",onClick:()=>_(`/${window.location.search}`),className:"-translate-x-[15px]"})})}),t.jsx("div",{className:"overflow-x-scroll flex gap-2 whitespace-nowrap mt-3",children:[...Array(5)].map((l,s)=>t.jsx(x,{width:153,height:48,style:{borderRadius:"15px"},baseColor:r?"#36393E":"#DADADA"},s))}),t.jsx("div",{className:"mt-[25px]",children:t.jsx(x,{height:48,style:{borderRadius:"15px"},baseColor:r?"#36393E":"#DADADA"})}),t.jsx("div",{className:"mt-[15px]",children:[...Array(1)].map((l,s)=>t.jsx(x,{height:200,style:{borderRadius:"15px"},baseColor:r?"#36393E":"#DADADA"},s))}),t.jsx(G,{}),t.jsx("div",{className:"mt-[15px]",children:[...Array(1)].map((l,s)=>t.jsx(x,{height:200,style:{borderRadius:"15px"},baseColor:r?"#36393E":"#DADADA"},s))})]}):t.jsxs("div",{className:"container_main !px-0",children:[t.jsx("div",{className:" fixed  container_main  z-999 w-full bg-white dark:bg-[#272829] rounded-bl-[20px] rounded-br-[20px]  h-[75px]  mb-[14px] p-[15px]",children:t.jsx("div",{className:"flex items-center w-full  justify-between gap-[10px] ",children:t.jsxs("div",{className:"flex gap-[10px]  items-center",children:[t.jsx(y,{className:"-translate-x-[15px]",fill:r?"#fff":"#141414",onClick:()=>_(`/${window.location.search}`)}),t.jsx(L,{darkmode:r})]})})}),t.jsxs("div",{className:"container_main !px-0",children:[t.jsx("div",{className:"pt-[75px]  mb-3",children:t.jsx(z,{widgetId:f==null?void 0:f.widget})}),t.jsxs("div",{className:"mt-[25px] flex flex-col gap-[15px]",children:[p.map((l,s)=>t.jsx(W,{item:l,index:s,darkmode:r})),t.jsx(k,{setEditModal:h,editModal:R,setObjError:g,darkmode:r,setAnotherObj:v,setObj:N,obj:o,objError:H,handleFind:I})]})]})]})})};export{V as default};
